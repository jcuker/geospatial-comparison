{"version":3,"sources":["ComponentWrapper.js","leaflet/drawing.js","leaflet/geojson.js","leaflet/popup.js","leaflet/radar.js","leaflet/simple.js","leaflet/turf/center.js","leaflet/turf/connect.js","leaflet/index.js","ol/drawing.js","ol/util.js","ol/geojson.js","ol/popup.js","ol/radar.js","ol/simple.js","ol/turf/center.js","ol/turf/connect.js","ol/index.js","landing-page/index.js","mapbox/drawing.js","mapbox/geojson.js","mapbox/popup.js","mapbox/radar.js","mapbox/simple.js","mapbox/turf/center.js","mapbox/turf/connect.js","mapbox/index.js","App.js","index.js"],"names":["ComponentWrapper","props","toggleCollapsed","setState","collapsed","state","onSelect","item","key","keyPath","selectedKeys","domEvent","history","replace","pathname","framework","getNavItems","ol","Item","onClick","push","leaflet","mapbox","turf","splitPathname","window","location","split","length","this","menuNavItems","map","mapResolver","style","height","width","position","zIndex","right","type","top","React","createElement","MenuUnfoldOutlined","MenuFoldOutlined","openKeys","mode","theme","title","onTitleClick","Component","withRouter","Drawing","undefined","rects","openInfo","notification","destroy","modalOpen","closeModal","e","gesture","finishedRect","document","info","message","description","placement","duration","L","setView","tileLayer","attribution","addTo","marker","circle","color","fillColor","fillOpacity","radius","polygon","bindPopup","on","startingLatLng","inProgressRect","endingLatLng","latlng","lat","lng","initial","prevProps","prevState","temporary","rectToRemove","pop","removeLayer","drawn","rectangle","weight","id","bottom","left","InfoCircleOutlined","visible","footer","GeoJson","mymap","fetch","origin","json","states","twitter","geoJSON","onEachFeature","feature","layer","properties","popupElementStates","popupElementTwitter","name","text","user","Popup","popup","setLatLng","setContent","toString","openOn","Radar","radarLayers","timestamps","animationTimer","animationPosition","addLayer","ts","TileLayer","tileSize","opacity","hasLayer","changeRadarPosition","preloadOnly","currentTimestamp","nextTimestamp","setOpacity","stop","clearTimeout","playing","play","showFrame","setTimeout","nextPosition","preloadingDirection","PauseOutlined","CaretRightOutlined","Simple","Center","turfFeatureCollection","features","allCenters","forEach","center","centerFeatureCollection","popupElementCenter","Connect","flatCoords","geometry","coordinates","lineString","Leaflet","draw","source","vector","raster","OSM","VectorSource","wrapX","VectorLayer","Map","layers","target","view","View","zoom","event","geometryFunction","value","createRegularPolygon","createBox","last","dx","dy","Math","sqrt","rotation","atan2","newCoordinates","i","angle","PI","fraction","offsetX","cos","offsetY","sin","slice","setCoordinates","Polygon","Draw","addInteraction","onChange","removeInteraction","blue","green","red","black","white","styleFunctionTwitter","olStyle","image","olCircle","fill","olFill","stroke","olStroke","Number","MAX_SAFE_INTEGER","styleFunctionEnrichedTwitter","sentiment","toLowerCase","includes","getColorFromSentiment","getProperties","styleFunctionStates","selected","olText","styleFunctionTwitterCluster","get","size","getRandomInt","min","max","ceil","floor","random","isCluster","container","getElementById","content","closer","overlay","Overlay","element","autoPan","autoPanAnimation","onclick","setPosition","blur","layer1","olVectorLayer","olVectorSource","format","GeoJSON","url","layer2","overlays","forEachFeatureAtPixel","pixel","coordinate","popupString","s","innerHTML","console","log","className","XYZ","evt","hdms","toStringHDMS","olProj","jsDates","tweetsByTime","tweetClusterLayer","twitterLayer","setProperties","targetProperties","allLayers","getLayers","result","currLayer","currLayerProperties","mapHasLayer","tweetsInTimeBucket","getSource","addFeatures","clear","showRadar","stepPosition","direction","loaded","newPosition","forceUpdate","onSliderChange","val","inputValue","setDistance","showTwitter","createOverlay","loadData","clusterFeatures","currFeature","str","place","Date","baseUrl","remote","error","unixTimestampOfTweet","getTime","findMatchingTimestamp","dateIdx","readFeatures","dtg","getGeometry","transform","olClusterSource","distance","success","snapshot","setVisible","getVisible","toLocaleString","timeString","fontSize","textAlign","alignSelf","justifySelf","margin","leftIdx","rightIdx","timeDisplay","getTimeDisplay","display","flexDirection","alignItems","justifyContent","paddingLeft","alignContent","background","borderRadius","step","flex","marginLeft","marginRight","LeftOutlined","RightOutlined","statesResponse","geoJson","lineStringFeature","readFeature","addFeature","getFeatures","vectorLayer","rasterLayer","statesLayer","fromLonLat","twitterResponse","flatGeometry","flatCoordinates","OpenLayers","toggleRemote","componentKey","String","dataLocationButton","CloudServerOutlined","HddOutlined","remoteUrl","jsonConfig","geoserverUrl","LandingPage","to","src","alt","process","REACT_APP_MAPBOX_API_KEY","addControl","MapboxDraw","a","statesJson","twitterJson","addSource","data","paint","layout","queryRenderedFeatures","point","descStr","unknownString","Object","keys","JSON","stringify","lngLat","setLngLat","setHTML","getCanvas","cursor","htmlStr","radarObjects","obj","getLayer","setLayoutProperty","sourceId","find","tiles","sources","minzoom","maxzoom","visibility","Mapbox","App","path","component","ReactDOM","render"],"mappings":"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","file":"static/js/main.9e23aaa4.chunk.js","sourcesContent":["import { MenuFoldOutlined, MenuUnfoldOutlined } from \"@ant-design/icons\";\nimport { Button, Menu } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport SubMenu from \"antd/lib/menu/SubMenu\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\n/**\n * Expects props to be like such:\n * {\n *  framework: 'leaflet' | 'ol' | 'mapbox,\n *  mapResolver: (key: number) => JSX.Element;\n * }\n */\nclass ComponentWrapper extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collapsed: false,\n      key: \"1\",\n      turf: false,\n    };\n  }\n\n  componentDidMount() {\n    const splitPathname = window.location.pathname.split(\"/\");\n    const key = splitPathname[splitPathname.length - 1];\n    this.setState({ key });\n    if (key >= 5 && key < 7) {\n      this.setState({ turf: true });\n    }\n  }\n\n  toggleCollapsed = () => {\n    this.setState({\n      collapsed: !this.state.collapsed,\n    });\n  };\n\n  onSelect = ({ item, key, keyPath, selectedKeys, domEvent }) => {\n    this.setState({ key });\n    if (key < 1000)\n      this.props.history.replace({\n        pathname: `/${this.props.framework}/${key}`,\n      });\n  };\n\n  getNavItems = () => {\n    const ol = (\n      <Menu.Item\n        key=\"1000\"\n        onClick={() => {\n          this.props.history.push(`/ol/${this.state.key}`);\n        }}\n      >\n        Goto OpenLayers\n      </Menu.Item>\n    );\n\n    const leaflet = (\n      <Menu.Item\n        key=\"1001\"\n        onClick={() => {\n          this.props.history.push(`/leaflet/${this.state.key}`);\n        }}\n      >\n        Goto Leaflet\n      </Menu.Item>\n    );\n\n    const mapbox = (\n      <Menu.Item\n        key=\"1002\"\n        onClick={() => {\n          this.props.history.push(`/mapbox/${this.state.key}`);\n        }}\n      >\n        Goto Mapbox\n      </Menu.Item>\n    );\n\n    switch (this.props.framework) {\n      case \"leaflet\":\n        return [ol, mapbox];\n      case \"ol\":\n        return [leaflet, mapbox];\n      case \"mapbox\":\n        return [leaflet, ol];\n      default:\n        return [leaflet, ol, mapbox];\n    }\n  };\n\n  render() {\n    const menuNavItems = this.getNavItems();\n    const map = this.props.mapResolver(this.state.key);\n\n    return (\n      <div\n        style={{\n          height: \"100vh\",\n          width: \"100vw\",\n        }}\n      >\n        <div\n          style={{\n            position: \"absolute\",\n            zIndex: 999999,\n            right: 0,\n          }}\n        >\n          <Button\n            type=\"primary\"\n            onClick={this.toggleCollapsed}\n            style={{\n              position: \"absolute\",\n              top: 7.5,\n              right: this.state.collapsed ? 5 : \"12.25rem\",\n            }}\n          >\n            {React.createElement(\n              this.state.collapsed ? MenuUnfoldOutlined : MenuFoldOutlined\n            )}\n          </Button>\n          <Menu\n            selectedKeys={[this.state.key]}\n            openKeys={[this.state.turf ? \"turf\" : \"\"]}\n            mode=\"inline\"\n            theme=\"dark\"\n            style={{\n              height: \"100vh\",\n              width: this.state.collapsed ? \"0rem\" : \"12rem\",\n            }}\n            onSelect={this.onSelect}\n          >\n            <Menu.Item key=\"1\">Just a Map</Menu.Item>\n            <Menu.Item key=\"2\">Drawing Shapes</Menu.Item>\n            <Menu.Item key=\"3\">Popup at Click</Menu.Item>\n            <Menu.Item key=\"4\">GeoJSON</Menu.Item>\n            <SubMenu\n              key=\"turf\"\n              title=\"Turf\"\n              onTitleClick={() => this.setState({ turf: !this.state.turf })}\n            >\n              <Menu.Item key=\"5\">Connect the Dots</Menu.Item>\n              <Menu.Item key=\"6\">Center of States</Menu.Item>\n            </SubMenu>\n            <Menu.Item key=\"7\">Radar</Menu.Item>\n            {[...menuNavItems]}\n          </Menu>\n        </div>\n        {map}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(ComponentWrapper);\n","/**\n *\n * There exists a plugin for drawing here: https://github.com/Leaflet/Leaflet.draw\n * This demo is restricted to vanilla features though. If you NEED drawing consider the above library.\n */\n\nimport React from \"react\";\nimport { InfoCircleOutlined } from \"@ant-design/icons\";\nimport { Modal, Button, notification } from \"antd\";\n\nexport default class Drawing extends React.Component {\n  map = undefined;\n  rects = [];\n\n  constructor() {\n    super();\n    this.state = {\n      gesture: undefined,\n      finishedRect: undefined,\n      modalOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    document.title = \"Leaflet | Drawing Example\";\n\n    notification.destroy();\n    notification.info({\n      message: \"Drawing\",\n      description:\n        \"Clicking on the map will begin to draw a rectangle. Click the button in the bottom right for more information.\",\n      placement: \"topLeft\",\n      duration: 5,\n    });\n\n    const L = window.L;\n\n    const map = L.map(\"map\").setView([51.505, -0.09], 13);\n\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '& <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(map);\n\n    const marker = L.marker([51.5, -0.09]).addTo(map);\n\n    const circle = L.circle([51.508, -0.11], {\n      color: \"red\",\n      fillColor: \"#f03\",\n      fillOpacity: 0.5,\n      radius: 500,\n    }).addTo(map);\n\n    const polygon = L.polygon([\n      [51.509, -0.08],\n      [51.503, -0.06],\n      [51.51, -0.047],\n    ]).addTo(map);\n\n    marker.bindPopup(\"I am a marker.\");\n    circle.bindPopup(\"I am a circle.\");\n    polygon.bindPopup(\"I am a polygon.\");\n\n    this.map = map;\n\n    map.on(\"click\", (e) => {\n      if (this.state.gesture) {\n        const startingLatLng = this.state.gesture.inProgressRect.startingLatLng;\n        const endingLatLng = e.latlng;\n\n        this.setState({\n          gesture: undefined,\n          finishedRect: {\n            startingLatLng: [...startingLatLng],\n            endingLatLng: [endingLatLng.lat, endingLatLng.lng],\n          },\n        });\n      } else {\n        this.setState({\n          gesture: {\n            initial: e,\n            inProgressRect: {\n              startingLatLng: [e.latlng.lat, e.latlng.lng],\n            },\n          },\n        });\n      }\n    });\n\n    map.on(\"mousemove\", (e) => {\n      if (\n        this.state.gesture &&\n        this.state.gesture.inProgressRect &&\n        this.state.gesture.inProgressRect.startingLatLng\n      ) {\n        const endingLatLng = e.latlng;\n\n        this.setState({\n          gesture: {\n            inProgressRect: {\n              startingLatLng: [\n                ...this.state.gesture.inProgressRect.startingLatLng,\n              ],\n              endingLatLng: [endingLatLng.lat, endingLatLng.lng],\n            },\n          },\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    notification.destroy();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const L = window.L;\n\n    if (this.rects.length > 0 && this.rects[this.rects.length - 1].temporary) {\n      const rectToRemove = this.rects.pop();\n      this.map.removeLayer(rectToRemove);\n    }\n\n    if (this.state.finishedRect) {\n      const drawn = L.rectangle(\n        [\n          [...this.state.finishedRect.startingLatLng],\n          [...this.state.finishedRect.endingLatLng],\n        ],\n        {\n          color: \"#ff7800\",\n          weight: 5,\n        }\n      ).addTo(this.map);\n\n      drawn.bindPopup(\"You drew me :)\");\n      this.rects.push(drawn);\n\n      this.setState({ finishedRect: undefined });\n    } else if (\n      this.state.gesture &&\n      this.state.gesture.inProgressRect.startingLatLng &&\n      this.state.gesture.inProgressRect.endingLatLng\n    ) {\n      const drawn = L.rectangle(\n        [\n          [...this.state.gesture.inProgressRect.startingLatLng],\n          [...this.state.gesture.inProgressRect.endingLatLng],\n        ],\n        {\n          color: \"#ff7800\",\n          weight: 5,\n        }\n      ).addTo(this.map);\n\n      drawn[\"temporary\"] = true;\n      this.rects.push(drawn);\n    }\n  }\n\n  openInfo = () => {\n    notification.destroy();\n    this.setState({ modalOpen: true });\n  };\n\n  closeModal = (e) => {\n    this.setState({\n      modalOpen: false,\n    });\n  };\n\n  render() {\n    return (\n      <>\n        <div id=\"map\" />\n        <Button\n          type=\"primary\"\n          onClick={this.openInfo}\n          style={{\n            position: \"absolute\",\n            bottom: 5,\n            left: 5,\n            zIndex: 999,\n          }}\n        >\n          {React.createElement(InfoCircleOutlined)}\n        </Button>\n\n        <Modal\n          title=\"Drawing in Leaflet\"\n          visible={this.state.modalOpen}\n          footer={[\n            <Button key=\"ok\" onClick={this.closeModal}>\n              OK\n            </Button>,\n          ]}\n        >\n          <p>\n            Leaflet does not have built-in support for a robust drawing feature.\n            Drawing a rectangle is easy enough to do, but a full-fledged drawing\n            system is way more complex. Click the map once to anchor one point\n            and then click another point to finish the rectangle. See source for\n            additional comments.\n          </p>\n        </Modal>\n      </>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class GeoJson extends React.Component {\n  async componentDidMount() {\n    document.title = \"Leaflet | GeoJson Example\";\n\n    const L = window.L;\n\n    const mymap = L.map(\"map\").setView([37.71859, -92.007813], 4);\n\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '& <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(mymap);\n\n    const states = await (\n      await fetch(`${window.location.origin}/states.json`)\n    ).json();\n    const twitter = await (\n      await fetch(`${window.location.origin}/twitter.json`)\n    ).json();\n\n    L.geoJSON(states, {\n      onEachFeature: (feature, layer) => {\n        if (feature.properties) {\n          const properties = feature.properties;\n          this.popupElementStates(layer, properties);\n        }\n      },\n    }).addTo(mymap);\n\n    L.geoJSON(twitter, {\n      onEachFeature: (feature, layer) => {\n        if (feature.properties) {\n          const properties = feature.properties;\n          this.popupElementTwitter(layer, properties);\n        }\n      },\n    }).addTo(mymap);\n  }\n\n  popupElementStates(layer, properties) {\n    layer.bindPopup(`Name: ${properties.name} id: ${properties.id}`);\n  }\n\n  popupElementTwitter(layer, properties) {\n    layer.bindPopup(`Text: ${properties.text} user: ${properties.user}`);\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\" />\n      </>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class Popup extends React.Component {\n  componentDidMount() {\n    document.title = \"Leaflet | Popup Example\";\n\n    const L = window.L;\n\n    // Create a Leaflet map that corresponds to the div with id \"map\"\n    const mymap = L.map(\"map\").setView([37.71859, -92.007813], 4);\n\n    // Use OpenStreetMap as the map's tileset\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '& <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(mymap);\n\n    // Set a popup to open at the coordinates where a mouse click occurrs\n    mymap.on(\"click\", (e) => {\n      L.popup()\n        .setLatLng(e.latlng)\n        .setContent(\"You clicked the map at \" + e.latlng.toString())\n        .openOn(mymap);\n    });\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\" />\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport { Button, notification } from \"antd\";\nimport { CaretRightOutlined, PauseOutlined } from \"@ant-design/icons\";\n\nexport default class Radar extends React.Component {\n  L = window.L;\n\n  radarLayers = [];\n  timestamps = [];\n  animationTimer = undefined;\n  animationPosition = -1;\n\n  constructor() {\n    super();\n    this.state = {\n      playing: false,\n    };\n  }\n\n  async componentDidMount() {\n    document.title = \"Leaflet | Radar Example\";\n\n    notification.destroy();\n    notification.info({\n      message: \"Radar\",\n      description:\n        \"Press the play button in the lower-left corner to start the radar animation\",\n      placement: \"topLeft\",\n      duration: 5,\n    });\n\n    this.map = this.L.map(\"map\").setView([37.71859, -92.007813], 5);\n\n    this.L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '& <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(this.map);\n\n    this.timestamps = await (\n      await fetch(\"https://api.rainviewer.com/public/maps.json\")\n    ).json();\n  }\n\n  componentWillUnmount() {\n    notification.destroy();\n  }\n\n  /**\n   * Animation functions\n   * @param ts\n   */\n  addLayer = (ts) => {\n    if (!this.radarLayers[ts]) {\n      this.radarLayers[ts] = new this.L.TileLayer(\n        \"https://tilecache.rainviewer.com/v2/radar/\" +\n          ts +\n          \"/256/{z}/{x}/{y}/2/1_1.png\",\n        {\n          tileSize: 256,\n          opacity: 0.001,\n          zIndex: ts,\n        }\n      );\n    }\n\n    if (!this.map.hasLayer(this.radarLayers[ts])) {\n      this.map.addLayer(this.radarLayers[ts]);\n    }\n  };\n\n  changeRadarPosition = (position, preloadOnly) => {\n    while (position >= this.timestamps.length) {\n      position -= this.timestamps.length;\n    }\n    while (position < 0) {\n      position += this.timestamps.length;\n    }\n\n    var currentTimestamp = this.timestamps[this.animationPosition];\n    var nextTimestamp = this.timestamps[position];\n\n    this.addLayer(nextTimestamp);\n\n    if (preloadOnly) {\n      return;\n    }\n\n    this.animationPosition = position;\n\n    if (this.radarLayers[currentTimestamp]) {\n      this.radarLayers[currentTimestamp].setOpacity(0);\n    }\n\n    this.radarLayers[nextTimestamp].setOpacity(100);\n  };\n\n  /**\n   * Stop the animation\n   * Check if the animation timeout is set and clear it.\n   */\n  stop = () => {\n    if (this.animationTimer !== undefined) {\n      clearTimeout(this.animationTimer);\n      this.animationTimer = undefined;\n      this.setState({ playing: false });\n      return true;\n    }\n    return false;\n  };\n\n  play = () => {\n    this.showFrame(this.animationPosition + 1);\n\n    // Main animation driver. Run this function every 500 ms\n    this.animationTimer = setTimeout(this.play, 500);\n    this.setState({ playing: true });\n  };\n\n  showFrame = (nextPosition) => {\n    var preloadingDirection =\n      nextPosition - this.animationPosition > 0 ? 1 : -1;\n\n    this.changeRadarPosition(nextPosition);\n\n    // preload next next frame (typically, +1 frame)\n    // if don't do that, the animation will be blinking at the first loop\n    this.changeRadarPosition(nextPosition + preloadingDirection, true);\n  };\n\n  render() {\n    return (\n      <>\n        <div id=\"map\" />\n        <Button\n          type=\"primary\"\n          style={{\n            position: \"absolute\",\n            bottom: 5,\n            left: 5,\n            height: 35,\n            zIndex: 9999,\n            width: 45,\n          }}\n          onClick={() => (this.state.playing ? this.stop() : this.play())}\n        >\n          {this.state.playing ? <PauseOutlined /> : <CaretRightOutlined />}\n        </Button>\n      </>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class Simple extends React.Component {\n  componentDidMount() {\n    document.title = \"Leaflet | Simple Example\";\n\n    // Since Leaftet is added via the root index.html file, we have to get access to the L object via the window.\n    const L = window.L;\n\n    const map = L.map(\"map\").setView([0, 0], 2);\n\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '& <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(map);\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\" />\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport * as turf from \"@turf/turf\";\n\nexport default class Center extends React.Component {\n  async componentDidMount() {\n    document.title = \"Leaflet | Turf Center\";\n\n    const L = window.L;\n\n    const mymap = L.map(\"map\").setView([37.71859, -92.007813], 4);\n\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '& <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(mymap);\n\n    const states = await (\n      await fetch(`${window.location.origin}/states.json`)\n    ).json();\n\n    const turfFeatureCollection = turf.featureCollection(states.features);\n    const allCenters = [];\n\n    turfFeatureCollection.features.forEach((feature) => {\n      const center = turf.center(feature);\n      center.properties = {\n        name: feature.properties.name || \"\",\n      };\n      allCenters.push(center);\n    });\n\n    L.geoJSON(states, {\n      onEachFeature: (feature, layer) => {\n        // does this feature have a property named popupContent?\n        if (feature.properties) {\n          const properties = feature.properties;\n          this.popupElementStates(layer, properties);\n        }\n      },\n    }).addTo(mymap);\n\n    const centerFeatureCollection = turf.featureCollection(allCenters);\n    L.geoJSON(centerFeatureCollection, {\n      onEachFeature: (feature, layer) => {\n        if (feature.properties) {\n          const properties = feature.properties;\n          this.popupElementCenter(layer, properties);\n        }\n      },\n    }).addTo(mymap);\n  }\n\n  popupElementStates(layer, properties) {\n    layer.bindPopup(`Name: ${properties.name} id: ${properties.id}`);\n  }\n\n  popupElementCenter(layer, properties) {\n    layer.bindPopup(`Center of ${properties.name}`);\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\" />\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport * as turf from \"@turf/turf\";\n\nexport default class Connect extends React.Component {\n  async componentDidMount() {\n    document.title = \"Leaflet | Turf LineString\";\n\n    const L = window.L;\n\n    const mymap = L.map(\"map\").setView([37.71859, -92.007813], 4);\n\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '& <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(mymap);\n\n    const twitter = await (\n      await fetch(`${window.location.origin}/twitter.json`)\n    ).json();\n\n    const turfFeatureCollection = turf.featureCollection(twitter.features);\n\n    const flatCoords = [];\n    turfFeatureCollection.features.forEach((feature) => {\n      flatCoords.push(feature.geometry.coordinates);\n    });\n\n    const lineString = turf.lineString(flatCoords);\n\n    L.geoJSON(twitter, {\n      onEachFeature: (feature, layer) => {\n        // does this feature have a property named popupContent?\n        if (feature.properties) {\n          const properties = feature.properties;\n          this.popupElementTwitter(layer, properties);\n        }\n      },\n    }).addTo(mymap);\n\n    L.geoJSON(lineString).addTo(mymap);\n  }\n\n  popupElementTwitter(layer, properties) {\n    layer.bindPopup(`Text: ${properties.text} user: ${properties.user}`);\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\" />\n      </>\n    );\n  }\n}\n","import \"antd/dist/antd.css\";\nimport React from \"react\";\nimport ComponentWrapper from \"../ComponentWrapper\";\nimport Drawing from \"./drawing\";\nimport GeoJSON from \"./geojson\";\nimport Popup from \"./popup\";\nimport Radar from \"./radar\";\nimport Simple from \"./simple\";\nimport Center from \"./turf/center\";\nimport Connect from \"./turf/connect\";\nimport \"./leaflet.css\";\n\nexport default function Leaflet() {\n  function mapResolver(key) {\n    switch (key) {\n      case \"1\":\n        return <Simple />;\n      case \"2\":\n        return <Drawing />;\n      case \"3\":\n        return <Popup />;\n      case \"4\":\n        return <GeoJSON />;\n      case \"5\":\n        return <Connect />;\n      case \"6\":\n        return <Center />;\n      case \"7\":\n        return <Radar />;\n      default:\n        return <Simple />;\n    }\n  }\n\n  return <ComponentWrapper framework=\"leaflet\" mapResolver={mapResolver} />;\n}\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport { notification } from \"antd\";\nimport Polygon from \"ol/geom/Polygon\";\nimport Draw, { createBox, createRegularPolygon } from \"ol/interaction/Draw\";\nimport { Tile as TileLayer, Vector as VectorLayer } from \"ol/layer\";\nimport Map from \"ol/Map\";\nimport { OSM, Vector as VectorSource } from \"ol/source\";\nimport View from \"ol/View\";\nimport React from \"react\";\n\nexport default class Drawing extends React.Component {\n  constructor() {\n    super();\n    this.draw = undefined;\n    this.map = undefined;\n    this.source = undefined;\n    this.vector = undefined;\n    this.raster = undefined;\n  }\n\n  componentDidMount() {\n    document.title = \"OpenLayers | Drawing Example\";\n\n    notification.destroy();\n    notification.info({\n      message: \"Drawing Instructions\",\n      description:\n        \"Choose the shape type from the bottom-right corner to draw arbitrary shapes onto the map.\",\n      placement: \"topLeft\",\n      duration: 10,\n    });\n\n    this.raster = new TileLayer({\n      source: new OSM(),\n    });\n\n    this.source = new VectorSource({ wrapX: false });\n\n    this.vector = new VectorLayer({\n      source: this.source,\n    });\n\n    this.map = new Map({\n      layers: [this.raster, this.vector],\n      target: \"map\",\n      view: new View({\n        center: [-11000000, 4600000],\n        zoom: 4,\n      }),\n    });\n  }\n\n  componentWillUnmount() {\n    notification.destroy();\n  }\n\n  addInteraction(event) {\n    let value = event.target.value;\n\n    if (value !== \"None\") {\n      let geometryFunction;\n      if (value === \"Square\") {\n        value = \"Circle\";\n        geometryFunction = createRegularPolygon(4);\n      } else if (value === \"Box\") {\n        value = \"Circle\";\n        geometryFunction = createBox();\n      } else if (value === \"Star\") {\n        value = \"Circle\";\n        geometryFunction = function (coordinates, geometry) {\n          const center = coordinates[0];\n          const last = coordinates[1];\n          const dx = center[0] - last[0];\n          const dy = center[1] - last[1];\n          const radius = Math.sqrt(dx * dx + dy * dy);\n          const rotation = Math.atan2(dy, dx);\n          const newCoordinates = [];\n          const numPoints = 12;\n          for (let i = 0; i < numPoints; ++i) {\n            const angle = rotation + (i * 2 * Math.PI) / numPoints;\n            const fraction = i % 2 === 0 ? 1 : 0.5;\n            const offsetX = radius * fraction * Math.cos(angle);\n            const offsetY = radius * fraction * Math.sin(angle);\n            newCoordinates.push([center[0] + offsetX, center[1] + offsetY]);\n          }\n          newCoordinates.push(newCoordinates[0].slice());\n          if (!geometry) {\n            geometry = new Polygon([newCoordinates]);\n          } else {\n            geometry.setCoordinates([newCoordinates]);\n          }\n          return geometry;\n        };\n      }\n\n      this.draw = new Draw({\n        source: this.source,\n        type: value,\n        geometryFunction: geometryFunction,\n      });\n\n      this.map.addInteraction(this.draw);\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\"></div>\n        <form style={{ position: \"absolute\", bottom: 0, left: 5 }}>\n          <label>Shape type &nbsp;</label>\n          <select\n            id=\"type\"\n            onChange={(event) => {\n              this.map.removeInteraction(this.draw);\n              this.addInteraction(event);\n            }}\n          >\n            <option value=\"None\">None</option>\n            <option value=\"Circle\">Circle</option>\n            <option value=\"Square\">Square</option>\n            <option value=\"Box\">Box</option>\n            <option value=\"Star\">Star</option>\n          </select>\n        </form>\n      </>\n    );\n  }\n}\n","import olCircle from \"ol/style/Circle\";\nimport olFill from \"ol/style/Fill\";\nimport olStroke from \"ol/style/Stroke\";\nimport olStyle from \"ol/style/Style\";\nimport olText from \"ol/style/Text\";\n\n// colors\nconst blue = [0, 153, 255, 1];\nconst green = [0, 255, 64, 1];\nconst red = [242, 13, 13, 1];\nconst black = [0, 0, 0, 1];\nconst white = [255, 255, 255, 1];\n\nexport const styleFunctionTwitter = () => {\n  const width = 3;\n\n  return [\n    new olStyle({\n      image: new olCircle({\n        radius: width * 2,\n        fill: new olFill({\n          color: blue,\n        }),\n        stroke: new olStroke({\n          color: white,\n          width: width / 2,\n        }),\n      }),\n      zIndex: Number.MAX_SAFE_INTEGER,\n    }),\n  ];\n};\n\nexport const styleFunctionEnrichedTwitter = (feature) => {\n  const sentiment = feature.getProperties().sentiment || \"\";\n  const fillColor = getColorFromSentiment(sentiment);\n  const width = 3;\n\n  return [\n    new olStyle({\n      image: new olCircle({\n        radius: width * 2,\n        fill: new olFill({\n          color: fillColor,\n        }),\n        stroke: new olStroke({\n          color: white,\n          width: width / 2,\n        }),\n      }),\n      zIndex: Number.MAX_SAFE_INTEGER,\n    }),\n  ];\n};\n\nfunction getColorFromSentiment(sentiment) {\n  sentiment = sentiment.toLowerCase();\n\n  if (sentiment.includes(\"positive\")) {\n    return green;\n  } else if (sentiment.includes(\"neutral\")) {\n    return blue;\n  } else if (sentiment.includes(\"negative\")) {\n    return red;\n  } else {\n    return black;\n  }\n}\n\nexport const styleFunctionStates = (feature) => {\n  const color = feature.getProperties().selected ? \"#FF6347\" : \"#7FDBFF33\";\n  const name = feature.getProperties().name;\n  return [\n    new olStyle({\n      fill: new olFill({ color: color }),\n      stroke: new olStroke({\n        color: \"#0074D9\",\n        width: 2,\n      }),\n      text: new olText({ text: name }),\n    }),\n  ];\n};\n\nexport function styleFunctionTwitterCluster(feature) {\n  const features = feature.get(\"features\");\n  const size = features.length;\n\n  if (size === 0) return;\n\n  return size > 1\n    ? new olStyle({\n        image: new olCircle({\n          radius: 10,\n          stroke: new olStroke({\n            color: \"#fff\",\n          }),\n          fill: new olFill({\n            color: \"#3399CC\",\n          }),\n        }),\n        text: new olText({\n          text: size.toString(),\n          fill: new olFill({\n            color: \"#fff\",\n          }),\n        }),\n        zIndex: Number.MAX_SAFE_INTEGER,\n      })\n    : styleFunctionEnrichedTwitter(features[0]);\n}\n\nexport function mapHasLayer(map, layer) {\n  const targetProperties = layer.getProperties();\n  const allLayers = map.getLayers();\n\n  let result = false;\n\n  allLayers.forEach((currLayer) => {\n    const currLayerProperties = currLayer.getProperties();\n\n    if (\n      currLayerProperties &&\n      targetProperties &&\n      currLayerProperties.url === targetProperties.url\n    ) {\n      result = true;\n      return;\n    }\n  });\n\n  return result;\n}\n\nexport function getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function isCluster(feature) {\n  if (!feature || !feature.get(\"features\")) {\n    return false;\n  }\n  return feature.get(\"features\").length >= 1;\n}\n","import GeoJSON from \"ol/format/GeoJSON\";\nimport { Tile as TileLayer } from \"ol/layer\";\nimport olVectorLayer from \"ol/layer/Vector\";\nimport Map from \"ol/Map\";\nimport \"ol/ol.css\";\nimport Overlay from \"ol/Overlay\";\nimport { OSM } from \"ol/source\";\nimport olVectorSource from \"ol/source/Vector\";\nimport View from \"ol/View\";\nimport React from \"react\";\nimport { styleFunctionStates, styleFunctionTwitter } from \"./util\";\n\nexport default class GeoJson extends React.Component {\n  async componentDidMount() {\n    document.title = \"OpenLayers | GeoJson Example\";\n\n    const container = document.getElementById(\"popup\");\n    const content = document.getElementById(\"popup-content\");\n    const closer = document.getElementById(\"popup-closer\");\n    /**\n     * Create an overlay to anchor the popup to the map.\n     */\n    const overlay = new Overlay({\n      element: container,\n      autoPan: true,\n      autoPanAnimation: {\n        duration: 250,\n      },\n    });\n\n    /**\n     * Add a click handler to hide the popup.\n     * @return {boolean} Don't follow the href.\n     */\n    closer.onclick = function () {\n      overlay.setPosition(undefined);\n      closer.blur();\n      return false;\n    };\n\n    try {\n      const layer1 = new olVectorLayer({\n        source: new olVectorSource({\n          format: new GeoJSON(),\n          url: `${window.location.origin}/twitter.json`,\n        }),\n        style: styleFunctionTwitter,\n      });\n\n      const layer2 = new olVectorLayer({\n        source: new olVectorSource({\n          format: new GeoJSON(),\n          url: `${window.location.origin}/states.json`,\n        }),\n        style: styleFunctionStates,\n      });\n\n      const map = new Map({\n        layers: [\n          new TileLayer({\n            source: new OSM(),\n          }),\n          layer1,\n          layer2,\n        ],\n        target: \"map\",\n        overlays: [overlay],\n        view: new View({\n          center: [-11000000, 4600000],\n          zoom: 4,\n        }),\n      });\n\n      map.on(\"singleclick\", function (event) {\n        const features = [];\n        map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {\n          features.push(feature);\n        });\n        if (features.length > 0) {\n          const coordinate = event.coordinate;\n          let popupString = \"\";\n          for (let i = 0; i < features.length; i++) {\n            const properties = features[i].getProperties();\n            let s;\n            if (properties.name) {\n              s = properties.name;\n            } else {\n              s = properties.text;\n            }\n            popupString += `Feature ${i}: ${s}<br/>`;\n          }\n\n          content.innerHTML = popupString;\n          overlay.setPosition(coordinate);\n        }\n      });\n    } catch (er) {\n      console.log(er);\n      return null;\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"wrapper\">\n        <div id=\"map\"></div>;\n        <div id=\"popup\" className=\"ol-popup\">\n          <div id=\"popup-closer\" className=\"ol-popup-closer\"></div>\n          <div id=\"popup-content\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { Map, View } from \"ol\";\nimport TileLayer from \"ol/layer/Tile\";\nimport XYZ from \"ol/source/XYZ\";\nimport React from \"react\";\nimport * as olProj from \"ol/proj\";\nimport Overlay from \"ol/Overlay\";\nimport { toStringHDMS } from \"ol/coordinate\";\n\nexport default class Popup extends React.Component {\n  componentDidMount() {\n    document.title = \"OpenLayers | Popup Example\";\n\n    // Obtain reference to the HTMLElements that will house the popup content\n    const container = document.getElementById(\"popup\");\n    const content = document.getElementById(\"popup-content\");\n    const closer = document.getElementById(\"popup-closer\");\n\n    // Create an overlay to anchor the popup to the map\n    const overlay = new Overlay({\n      element: container,\n      autoPan: true,\n      autoPanAnimation: {\n        duration: 250,\n      },\n    });\n\n    // Add a click handler to hide the popup\n    closer.onclick = function () {\n      overlay.setPosition(undefined);\n      closer.blur();\n      return false;\n    };\n\n    // Create a new map object that uses OpenStreetMap as it's base layer and attach the above overlay\n    const map = new Map({\n      target: \"map\",\n      layers: [\n        new TileLayer({\n          source: new XYZ({\n            url: \"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n          }),\n        }),\n      ],\n      overlays: [overlay],\n      view: new View({\n        center: [0, 0],\n        zoom: 2,\n      }),\n    });\n\n    // Add a click handler to the map to render the popup\n    map.on(\"singleclick\", function (evt) {\n      const coordinate = evt.coordinate;\n      // conver the cordinate to a 'readable' string\n      const hdms = toStringHDMS(olProj.toLonLat(coordinate));\n\n      content.innerHTML = \"<p>You clicked here:</p><code>\" + hdms + \"</code>\";\n      overlay.setPosition(coordinate);\n    });\n  }\n\n  render() {\n    // Popup MUST have a parent div. You cannot use React's fragments for popups with OL!\n    return (\n      <div className=\"wrapper\">\n        <div id=\"map\"></div>\n        <div id=\"popup\" className=\"ol-popup\">\n          <div id=\"popup-closer\" className=\"ol-popup-closer\"></div>\n          <div id=\"popup-content\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { Map, View } from \"ol\";\nimport TileLayer from \"ol/layer/Tile\";\nimport XYZ from \"ol/source/XYZ\";\nimport React from \"react\";\nimport { OSM } from \"ol/source\";\nimport { Button, notification, Slider } from \"antd\";\nimport {\n  CaretRightOutlined,\n  PauseOutlined,\n  LeftOutlined,\n  RightOutlined,\n} from \"@ant-design/icons\";\nimport {\n  mapHasLayer,\n  styleFunctionEnrichedTwitter,\n  styleFunctionTwitterCluster,\n  isCluster,\n  getRandomInt,\n} from \"./util\";\nimport olVectorLayer from \"ol/layer/Vector\";\nimport olVectorSource from \"ol/source/Vector\";\nimport GeoJSON from \"ol/format/GeoJSON\";\nimport Overlay from \"ol/Overlay\";\nimport olClusterSource from \"ol/source/Cluster\";\n\nexport default class Simple extends React.Component {\n  map = undefined;\n\n  radarLayers = [];\n  timestamps = [];\n  jsDates = [];\n  animationTimer = undefined;\n  animationPosition = -1;\n\n  // Group tweets by time\n  tweetsByTime = [];\n  tweetClusterLayer = undefined;\n  twitterLayer = undefined;\n\n  constructor() {\n    super();\n    this.state = {\n      playing: false,\n      loaded: false,\n      showTwitter: false,\n      showRadar: true,\n      inputValue: 60,\n    };\n  }\n  async componentDidMount() {\n    document.title = \"OpenLayers | Radar Example\";\n\n    // Create the overlay and the popup elements\n    const container = document.getElementById(\"popup\");\n    const content = document.getElementById(\"popup-content\");\n    const closer = document.getElementById(\"popup-closer\");\n    const overlay = this.createOverlay(container, content, closer);\n\n    // Load the data from a remote geoserver or a local file.\n    // Note we are not awaiting so that the map will load and be responsive while the data is fetched.\n    this.loadData();\n\n    this.map = new Map({\n      target: \"map\",\n      layers: [\n        new TileLayer({\n          source: new OSM(),\n        }),\n      ],\n      view: new View({\n        center: [-11000000, 4600000],\n        zoom: 5,\n      }),\n      overlays: [overlay],\n    });\n\n    this.map.on(\"singleclick\", (event) => {\n      const features = [];\n\n      // iterate all features at the click pixel\n      this.map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {\n        // Have to check to see if the feature is a cluster. A cluser will be nsted in another fearure and we will have to handle it differently.\n        if (isCluster(feature)) {\n          const clusterFeatures = feature.get(\"features\");\n\n          for (const currFeature of clusterFeatures) {\n            const properties = currFeature.getProperties();\n            if (properties.twitter) {\n              features.push(currFeature);\n            }\n          }\n        } else {\n          const properties = feature.getProperties();\n          if (properties.twitter) {\n            features.push(feature);\n          }\n        }\n      });\n\n      if (features.length > 0) {\n        const coordinate = event.coordinate;\n        let popupString = \"\";\n\n        for (let i = 0; i < features.length; i++) {\n          const properties = features[i].getProperties();\n          let str = `User <em><b>${properties.user}</b></em> tweeted \"${properties.text}\" near ${properties.place}.<br/>`;\n          str += `The tweet seems to have a <b>${properties.sentiment}</b> sentiment.`;\n\n          popupString += `Feature ${i + 1}:<br/> ${str}<br/>`;\n          // If there is at least one feature, add another line break\n          if (i < features.length - 1) popupString += \"<br/>\";\n        }\n\n        content.innerHTML = popupString;\n        overlay.setPosition(coordinate);\n      } else {\n        overlay.setPosition(undefined);\n        closer.blur();\n      }\n    });\n  }\n\n  createOverlay(container, content, closer) {\n    const overlay = new Overlay({\n      element: container,\n      autoPan: true,\n      autoPanAnimation: {\n        duration: 250,\n      },\n    });\n\n    closer.onclick = function () {\n      overlay.setPosition(undefined);\n      closer.blur();\n      return false;\n    };\n\n    return overlay;\n  }\n\n  async loadData() {\n    this.timestamps = await (\n      await fetch(\"https://api.rainviewer.com/public/maps.json\")\n    ).json();\n\n    // convert the unix timestamps from rainviewer to a js timestamp\n    this.jsDates = this.timestamps.map((ts) => {\n      return new Date(ts * 1000);\n    });\n\n    const baseUrl = this.props.remote\n      ? this.props.remote\n      : window.location.origin;\n\n    // Remove any current notifications and display the loading one.\n    notification.destroy();\n    notification.info({\n      message: \"Please Wait\",\n      description: \"Loading data...\",\n      placement: \"topLeft\",\n      duration: 0,\n    });\n\n    let json;\n\n    try {\n      if (this.props.remote) {\n        const maxFeatures = 50_000;\n        const url = `${baseUrl}/streaming/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=streaming%3Astl-twitter&TIME=PT3H/PRESENT&width=768&height=330&srs=EPSG%3A4326&maxFeatures=${maxFeatures}&outputFormat=application%2Fjson`;\n        json = await (await fetch(url)).json();\n      } else {\n        json = await (await fetch(`${baseUrl}/enriched_twitter.json`)).json();\n      }\n    } catch (err) {\n      notification.destroy();\n      notification.error({\n        placement: \"topLeft\",\n        description:\n          \"Unable to get data. If not already, try to use local data if problem persists.\",\n      });\n      return;\n    }\n\n    // do some logic for each feature\n    json.features.map((feature) => {\n      const props = feature.properties;\n\n      // this helps in the case we have other non-twitter features at the same pixel when clicking\n      props[\"twitter\"] = true;\n\n      if (this.props.remote) {\n        const unixTimestampOfTweet = new Date(props[\"dtg\"]).getTime() / 1000;\n        // find the matching bucket\n        const ts = this.findMatchingTimestamp(unixTimestampOfTweet);\n        props[\"dtg\"] = ts;\n      } else {\n        // create some random date information for local data\n        const maxIndex = this.timestamps.length - 1;\n        const dateIdx = getRandomInt(0, maxIndex);\n        props[\"dtg\"] = this.jsDates[dateIdx].getTime() / 1000;\n      }\n\n      feature.properties = { ...props };\n      return feature;\n    });\n\n    const format = new GeoJSON();\n\n    // convert the raw jason into geojson object for further processing\n    format.readFeatures(json).map((feature) => {\n      const properties = feature.getProperties();\n      const ts = properties.dtg;\n\n      // add the feature to the correct time bucket\n      if (!this.tweetsByTime[ts]) this.tweetsByTime[ts] = [];\n      this.tweetsByTime[ts].push(feature);\n\n      // GeoJson's default projection is 4326 while OL's is 3857 we need to transform\n      feature.getGeometry().transform(\"EPSG:4326\", \"EPSG:3857\");\n      return feature;\n    });\n\n    this.tweetClusterLayer = new olVectorLayer({\n      source: new olClusterSource({\n        distance: this.state.inputValue,\n        source: new olVectorSource({\n          format: new GeoJSON(),\n        }),\n      }),\n      style: styleFunctionTwitterCluster,\n      zIndex: Number.MAX_SAFE_INTEGER,\n    });\n\n    this.twitterLayer = new olVectorLayer({\n      source: new olVectorSource({\n        format: new GeoJSON(),\n      }),\n      style: styleFunctionEnrichedTwitter,\n      zIndex: Number.MAX_SAFE_INTEGER,\n    });\n\n    this.map.addLayer(this.tweetClusterLayer);\n    // optional call to only have non-clustered tweets.\n    // this.map.addLayer(this.twitterLayer);\n    this.showFrame(this.animationPosition);\n    this.setState({ loaded: true });\n\n    notification.destroy();\n    notification.success({\n      message: \"Success\",\n      description: `Loaded ${json.features.length} tweets onto the map!`,\n      duration: 10,\n      placement: \"topLeft\",\n    });\n    notification.info({\n      message: \"Radar\",\n      description:\n        \"Press the play button in the lower-left corner to start the radar animation.\\n You can page through each frame using the arrows and change the radius of the clutering algorithm with the slider.\",\n      placement: \"topLeft\",\n      duration: 12,\n    });\n  }\n\n  componentWillUnmount() {\n    notification.destroy();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.showTwitter !== this.state.showTwitter) {\n      this.twitterLayer.setVisible(!this.twitterLayer.getVisible());\n      this.tweetClusterLayer.setVisible(!this.tweetClusterLayer.getVisible());\n    }\n    if (prevState.showRadar !== this.state.showRadar) {\n      this.state.showRadar\n        ? this.radarLayers[this.timestamps[this.animationPosition]].setOpacity(\n            100\n          )\n        : this.radarLayers[this.timestamps[this.animationPosition]].setOpacity(\n            0\n          );\n    }\n  }\n\n  // Next 5 functions were adapted from RainViewer's OpenLayers example\n  addLayer = (ts) => {\n    if (!this.radarLayers[ts]) {\n      const url =\n        \"https://tilecache.rainviewer.com/v2/radar/\" +\n        ts +\n        \"/256/{z}/{x}/{y}/2/1_1.png\";\n\n      const layer = new TileLayer({\n        source: new XYZ({\n          url,\n          tileSize: 256,\n        }),\n        zIndex: ts,\n        opacity: 0.001,\n      });\n      layer.setProperties({ url });\n      this.radarLayers[ts] = layer;\n    }\n\n    if (!mapHasLayer(this.map, this.radarLayers[ts])) {\n      this.map.addLayer(this.radarLayers[ts]);\n    }\n\n    const tweetsInTimeBucket = this.tweetsByTime[ts];\n    if (tweetsInTimeBucket && tweetsInTimeBucket.length > 0) {\n      // Have to get source twice to access the 'feature' source\n      this.tweetClusterLayer\n        .getSource()\n        .getSource()\n        .addFeatures(tweetsInTimeBucket);\n      this.twitterLayer.getSource().addFeatures(tweetsInTimeBucket);\n    }\n  };\n\n  changeRadarPosition = (position, preloadOnly) => {\n    while (position >= this.timestamps.length) {\n      position -= this.timestamps.length;\n    }\n    while (position < 0) {\n      position += this.timestamps.length;\n    }\n\n    var currentTimestamp = this.timestamps[this.animationPosition];\n    var nextTimestamp = this.timestamps[position];\n\n    this.twitterLayer.getSource().clear();\n    // Have to get source twice to access the 'feature' source\n    this.tweetClusterLayer.getSource().getSource().clear();\n\n    this.addLayer(nextTimestamp);\n\n    if (preloadOnly) {\n      return;\n    }\n\n    this.animationPosition = position;\n\n    if (!this.state.showRadar) {\n      return;\n    }\n\n    if (this.radarLayers[currentTimestamp]) {\n      this.radarLayers[currentTimestamp].setOpacity(0);\n    }\n\n    this.radarLayers[nextTimestamp].setOpacity(100);\n  };\n\n  stop = () => {\n    if (this.animationTimer !== undefined) {\n      clearTimeout(this.animationTimer);\n      this.animationTimer = undefined;\n      this.setState({ playing: false });\n      return true;\n    }\n    return false;\n  };\n\n  play = () => {\n    this.showFrame(this.animationPosition + 1);\n\n    // Main animation driver. Run this function every 500 ms\n    this.animationTimer = setTimeout(this.play, 500);\n    this.setState({ playing: true });\n  };\n\n  showFrame = (nextPosition) => {\n    const preloadingDirection =\n      nextPosition - this.animationPosition > 0 ? 1 : -1;\n\n    this.changeRadarPosition(nextPosition);\n\n    // preload next next frame (typically, +1 frame)\n    // if don't do that, the animation will be blinking at the first loop\n    this.changeRadarPosition(nextPosition + preloadingDirection, true);\n  };\n\n  getTimeDisplay() {\n    if (this.jsDates.length === 0) return new Date().toLocaleString(\"en-us\");\n\n    const jsDateObj =\n      this.animationPosition === -1\n        ? this.jsDates[0]\n        : this.jsDates[this.animationPosition];\n\n    const timeString = jsDateObj.toLocaleString(\"en-us\");\n    return (\n      <p\n        style={{\n          fontSize: 12,\n          textAlign: \"center\",\n          alignSelf: \"center\",\n          justifySelf: \"center\",\n          margin: 0,\n          color: \"black\",\n        }}\n      >\n        {timeString}\n      </p>\n    );\n  }\n\n  // Direction is either 'l' for left or 'r' for right\n  stepPosition = (direction) => {\n    if (!this.state.loaded || this.state.playing) return;\n    const newPosition =\n      direction === \"l\"\n        ? this.animationPosition - 1\n        : this.animationPosition + 1;\n    this.showFrame(newPosition);\n    // since we adpted a generic openlayers example, react was not used. None of the radar\n    // variables are tied to state. In order to avoid a large refactor, just force an update to rerender.\n    this.forceUpdate();\n  };\n\n  onSliderChange = (val) => {\n    this.setState({ inputValue: val });\n    this.tweetClusterLayer.getSource().setDistance(val);\n  };\n\n  findMatchingTimestamp(ts) {\n    let leftIdx = 0;\n    let rightIdx = 1;\n\n    while (rightIdx < this.timestamps.length - 1) {\n      if (ts >= this.timestamps[leftIdx] && ts < this.timestamps[rightIdx]) {\n        return this.timestamps[leftIdx];\n      }\n      leftIdx++;\n      rightIdx++;\n    }\n\n    // hack the date if not matched\n    const maxIndex = this.timestamps.length - 1;\n    const dateIdx = getRandomInt(0, maxIndex);\n    return this.jsDates[dateIdx].getTime() / 1000;\n  }\n\n  render() {\n    const timeDisplay = this.getTimeDisplay();\n\n    return (\n      <div className=\"wrapper\">\n        <div id=\"map\" />\n        <div id=\"popup\" className=\"ol-popup\">\n          <div id=\"popup-closer\" className=\"ol-popup-closer\"></div>\n          <div id=\"popup-content\"></div>\n        </div>\n        <Button\n          type=\"primary\"\n          onClick={() =>\n            this.setState({ showTwitter: !this.state.showTwitter })\n          }\n          style={{\n            position: \"absolute\",\n            bottom: 85,\n            left: 5,\n            height: 35,\n            width: 125,\n          }}\n        >\n          Toggle Tweets\n        </Button>\n        <Button\n          type=\"primary\"\n          onClick={() => this.setState({ showRadar: !this.state.showRadar })}\n          style={{\n            position: \"absolute\",\n            bottom: 125,\n            left: 5,\n            width: 125,\n          }}\n        >\n          Toggle Radar\n        </Button>\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            position: \"absolute\",\n            bottom: 5,\n            left: 5,\n            height: 35,\n            width: 300,\n            zIndex: 9999,\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n          }}\n        >\n          <Button\n            type=\"primary\"\n            style={{\n              width: 45,\n            }}\n            onClick={() => (this.state.playing ? this.stop() : this.play())}\n          >\n            {this.state.playing ? <PauseOutlined /> : <CaretRightOutlined />}\n          </Button>\n          <div\n            style={{\n              position: \"absolute\",\n              paddingLeft: 5,\n              left: 0,\n              bottom: 40,\n              display: \"flex\",\n              flexDirection: \"row\",\n              textAlign: \"center\",\n              alignContent: \"center\",\n              alignItems: \"center\",\n              background: \"white\",\n              width: 300,\n              justifyContent: \"space-between\",\n              borderRadius: \"3px\",\n            }}\n          >\n            <p style={{ margin: 0 }}>Grouping Distance</p>\n            <Slider\n              min={0}\n              max={400}\n              step={20}\n              style={{\n                width: 75,\n                flex: 2,\n              }}\n              value={this.state.inputValue}\n              onChange={this.onSliderChange}\n            />\n          </div>\n          <div\n            style={{\n              display: \"flex\",\n              marginLeft: 15,\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              background: \"white\",\n            }}\n          >\n            <Button\n              type=\"primary\"\n              style={{\n                width: 25,\n                marginRight: 5,\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n              }}\n              onClick={() => this.stepPosition(\"l\")}\n            >\n              <LeftOutlined />\n            </Button>\n            {timeDisplay}\n            <Button\n              type=\"primary\"\n              style={{\n                width: 25,\n                marginLeft: 5,\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n              }}\n              onClick={() => this.stepPosition(\"r\")}\n            >\n              <RightOutlined />\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { Map, View } from \"ol\";\nimport TileLayer from \"ol/layer/Tile\";\nimport XYZ from \"ol/source/XYZ\";\nimport React from \"react\";\n\nexport default class Simple extends React.Component {\n  componentDidMount() {\n    document.title = \"OpenLayers | Simple Example\";\n\n    new Map({\n      target: \"map\",\n      layers: [\n        new TileLayer({\n          source: new XYZ({\n            url: \"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n          }),\n        }),\n      ],\n      view: new View({\n        center: [0, 0],\n        zoom: 2,\n      }),\n    });\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\"></div>\n      </>\n    );\n  }\n}\n","import * as turf from \"@turf/turf\";\nimport { Map, View } from \"ol\";\nimport GeoJSON from \"ol/format/GeoJSON\";\nimport TileLayer from \"ol/layer/Tile\";\nimport olVectorLayer from \"ol/layer/Vector\";\nimport { fromLonLat } from \"ol/proj\";\nimport { OSM } from \"ol/source\";\nimport olVectorSource from \"ol/source/Vector\";\nimport React from \"react\";\nimport { styleFunctionStates } from \"../util\";\nimport Overlay from \"ol/Overlay\";\n\nexport default class Center extends React.Component {\n  async componentDidMount() {\n    document.title = \"OpenLayers | Turf Center\";\n\n    const container = document.getElementById(\"popup\");\n    const content = document.getElementById(\"popup-content\");\n    const closer = document.getElementById(\"popup-closer\");\n    /**\n     * Create an overlay to anchor the popup to the map.\n     */\n    const overlay = new Overlay({\n      element: container,\n      autoPan: true,\n      autoPanAnimation: {\n        duration: 250,\n      },\n    });\n\n    /**\n     * Add a click handler to hide the popup.\n     * @return {boolean} Don't follow the href.\n     */\n    closer.onclick = function () {\n      overlay.setPosition(undefined);\n      closer.blur();\n      return false;\n    };\n\n    const statesResponse = await fetch(`${window.location.origin}/states.json`);\n    const geoJson = await statesResponse.json();\n\n    const source = new olVectorSource();\n    const format = new GeoJSON();\n    const features = format.readFeatures(geoJson);\n\n    // GeoJson's default projection is 4326 while OL's is 3857\n    features.map((feature) =>\n      feature.getGeometry().transform(\"EPSG:4326\", \"EPSG:3857\")\n    );\n\n    // work with raw json\n    for (const feature of geoJson.features) {\n      const polygon = turf.multiPolygon(feature.geometry.coordinates);\n      const center = turf.center(polygon);\n      const lineStringFeature = format.readFeature(center);\n      lineStringFeature.setProperties({\n        name: \"Center of \" + feature.properties.name,\n      });\n      source.addFeature(lineStringFeature);\n    }\n\n    source.getFeatures().forEach((feature) => {\n      feature.getGeometry().transform(\"EPSG:4326\", \"EPSG:3857\");\n    });\n\n    const vectorLayer = new olVectorLayer({\n      source: source,\n    });\n\n    const rasterLayer = new TileLayer({\n      source: new OSM(),\n    });\n\n    const statesLayer = new olVectorLayer({\n      source: new olVectorSource({\n        format: new GeoJSON(),\n        features,\n      }),\n      style: styleFunctionStates,\n    });\n\n    const map = new Map({\n      layers: [rasterLayer, vectorLayer, statesLayer],\n      target: document.getElementById(\"map\"),\n      view: new View({\n        center: fromLonLat([-90.81070553065938, 40.716527262756514]),\n        zoom: 4,\n      }),\n      overlays: [overlay],\n    });\n\n    map.on(\"singleclick\", function (event) {\n      const features = [];\n      map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {\n        features.push(feature);\n      });\n      if (features.length > 0) {\n        const coordinate = event.coordinate;\n        let popupString = \"\";\n        for (let i = 0; i < features.length; i++) {\n          const properties = features[i].getProperties();\n          let s;\n          if (properties.name) {\n            s = properties.name;\n          } else {\n            s = properties.text;\n          }\n          popupString += `Feature ${i}: ${s}<br />`;\n        }\n\n        content.innerHTML = popupString;\n        overlay.setPosition(coordinate);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"wrapper\">\n        <div id=\"map\"></div>\n        <div id=\"popup\" className=\"ol-popup\">\n          <div id=\"popup-closer\" className=\"ol-popup-closer\"></div>\n          <div id=\"popup-content\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n","import * as turf from \"@turf/turf\";\nimport { Map, View } from \"ol\";\nimport GeoJSON from \"ol/format/GeoJSON\";\nimport TileLayer from \"ol/layer/Tile\";\nimport olVectorLayer from \"ol/layer/Vector\";\nimport { fromLonLat } from \"ol/proj\";\nimport { OSM } from \"ol/source\";\nimport olVectorSource from \"ol/source/Vector\";\nimport React from \"react\";\nimport { styleFunctionTwitter } from \"../util\";\n\nexport default class Connect extends React.Component {\n  async componentDidMount() {\n    document.title = \"OpenLayers | Turf LineString\";\n\n    const twitterResponse = await fetch(\n      `${window.location.origin}/twitter.json`\n    );\n    const geoJson = await twitterResponse.json();\n\n    const source = new olVectorSource();\n    const format = new GeoJSON();\n    const features = format.readFeatures(geoJson);\n\n    // GeoJson's default projection is 4326 while OL's is 3857\n    features.map((feature) =>\n      feature.getGeometry().transform(\"EPSG:4326\", \"EPSG:3857\")\n    );\n\n    const flatGeometry = [];\n\n    for (const feature of features) {\n      flatGeometry.push(feature.getGeometry().flatCoordinates);\n    }\n\n    const lineString = turf.lineString(flatGeometry);\n    const lineStringFeature = format.readFeature(lineString);\n\n    source.addFeature(lineStringFeature);\n\n    const vectorLayer = new olVectorLayer({\n      source: source,\n    });\n\n    const rasterLayer = new TileLayer({\n      source: new OSM(),\n    });\n\n    const twitterLayer = new olVectorLayer({\n      source: new olVectorSource({\n        format: new GeoJSON(),\n        features,\n      }),\n      style: styleFunctionTwitter,\n    });\n\n    new Map({\n      layers: [rasterLayer, vectorLayer, twitterLayer],\n      target: document.getElementById(\"map\"),\n      view: new View({\n        center: fromLonLat([-90.81070553065938, 40.716527262756514]),\n        zoom: 4,\n      }),\n    });\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\"></div>\n      </>\n    );\n  }\n}\n","import { CloudServerOutlined, HddOutlined } from \"@ant-design/icons\";\nimport { Button } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport React from \"react\";\nimport ComponentWrapper from \"../ComponentWrapper\";\nimport Drawing from \"./drawing\";\nimport GeoJson from \"./geojson\";\nimport Popup from \"./popup\";\nimport Radar from \"./radar\";\nimport Simple from \"./simple\";\nimport Center from \"./turf/center\";\nimport Connect from \"./turf/connect\";\n// custom css to style popups\nimport \"./ol.css\";\n// Openlayer's OWN css\nimport \"ol/ol.css\";\n\nexport default class OpenLayers extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      remote: false,\n      remoteUrl: \"\",\n    };\n  }\n\n  async componentDidMount() {\n    const jsonConfig = await (\n      await fetch(`${window.location.origin}/env.json`)\n    ).json();\n\n    this.setState({\n      remoteUrl: jsonConfig.geoserverUrl,\n    });\n  }\n\n  toggleRemote = () => {\n    this.setState({\n      remote: !this.state.remote,\n    });\n  };\n\n  mapResolver = (key) => {\n    const componentKey = `${String(this.state.remote)}-${key}`;\n\n    switch (key) {\n      case \"1\":\n        return <Simple />;\n      case \"2\":\n        return <Drawing />;\n      case \"3\":\n        return <Popup />;\n      case \"4\":\n        return <GeoJson />;\n      case \"5\":\n        return <Connect />;\n      case \"6\":\n        return <Center />;\n      case \"7\":\n        const dataLocationButton = (\n          <Button\n            type=\"primary\"\n            onClick={this.toggleRemote}\n            style={{\n              position: \"absolute\",\n              top: 45,\n              right: this.state.collapsed ? 5 : \"12.25rem\",\n            }}\n          >\n            {React.createElement(\n              this.state.remote ? CloudServerOutlined : HddOutlined\n            )}\n          </Button>\n        );\n        return (\n          <>\n            <Radar\n              key={componentKey}\n              remote={this.state.remote ? this.state.remoteUrl : undefined}\n            />\n            {dataLocationButton}\n          </>\n        );\n      default:\n        return <Simple />;\n    }\n  };\n\n  render() {\n    return <ComponentWrapper framework=\"ol\" mapResolver={this.mapResolver} />;\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Divider } from \"antd\";\nimport \"./landing-page.css\";\n\nexport default function LandingPage() {\n  return (\n    <div className=\"landing-page\">\n      <Link to=\"/leaflet/1\" id=\"leaflet\" className=\"framework\">\n        <img\n          src=\"https://leafletjs.com/docs/images/logo.png\"\n          alt=\"to leaflet\"\n        />\n      </Link>\n\n      <Divider className=\"divider\" />\n\n      <Link to=\"/ol/1\" id=\"ol\" className=\"framework\">\n        <img\n          src=\"https://financesonline.com/uploads/2019/09/OpenLayers-logo1.png\"\n          alt=\"to openlayers\"\n        />\n      </Link>\n\n      <Divider className=\"divider\" />\n\n      <Link to=\"/mapbox/1\" id=\"mapbox\" className=\"framework\">\n        <img src=\"https://logodix.com/logo/1863638.png\" alt=\"to mapbox\" />\n      </Link>\n    </div>\n  );\n}\n","import React from \"react\";\nimport * as mapbox from \"mapbox-gl/dist/mapbox-gl.js\";\nimport \"@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css\";\nimport * as MapboxDraw from \"@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw\";\nimport { notification } from \"antd\";\n\nexport default class Simple extends React.Component {\n  componentDidMount() {\n    document.title = \"Mapbox | Drawing Example\";\n\n    notification.destroy();\n    notification.info({\n      message: \"Drawing\",\n      description:\n        \"Choose a drawing capability from the toolbar below the zoom controls in the top left of the screen!\",\n      placement: \"topLeft\",\n      duration: 5,\n    });\n\n    mapbox.accessToken = process.env.REACT_APP_MAPBOX_API_KEY;\n\n    const map = new mapbox.Map({\n      container: \"map\",\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [-90, 40],\n      zoom: 3,\n    });\n\n    map.addControl(new mapbox.NavigationControl(), \"top-left\");\n    map.addControl(new MapboxDraw(), \"top-left\");\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\"></div>\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport * as mapbox from \"mapbox-gl/dist/mapbox-gl.js\";\n\nexport default class Simple extends React.Component {\n  async componentDidMount() {\n    document.title = \"Mapbox | GeoJson Example\";\n    mapbox.accessToken = process.env.REACT_APP_MAPBOX_API_KEY;\n\n    const map = new mapbox.Map({\n      container: \"map\",\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [-90, 40],\n      zoom: 3,\n    });\n    map.addControl(new mapbox.NavigationControl(), \"top-left\");\n\n    map.on(\"load\", async function () {\n      const statesJson = await (\n        await fetch(`${window.location.origin}/states.json`)\n      ).json();\n\n      const twitterJson = await (\n        await fetch(`${window.location.origin}/twitter.json`)\n      ).json();\n\n      map.addSource(\"states\", {\n        type: \"geojson\",\n        data: statesJson,\n      });\n\n      map.addSource(\"twitter\", {\n        type: \"geojson\",\n        data: twitterJson,\n      });\n\n      map.addLayer({\n        id: \"states\",\n        source: \"states\",\n        type: \"fill\",\n        paint: {\n          \"fill-color\": \"#03a9f4\",\n          \"fill-opacity\": 0.4,\n        },\n      });\n\n      map.addLayer({\n        id: \"twitter\",\n        source: \"twitter\",\n        type: \"symbol\",\n        layout: {\n          \"icon-image\": [\n            \"coalesce\",\n            [\"image\", [\"concat\", [\"get\", \"icon\"], \"-15\"]],\n            [\"image\", \"marker-15\"],\n          ],\n        },\n      });\n\n      map.on(\"click\", function (e) {\n        const features = map.queryRenderedFeatures(e.point);\n        if (!features || features.length <= 0) {\n          return;\n        }\n\n        let descStr = \"\";\n        for (let i = 0; i < features.length; i++) {\n          const properties = features[i].properties;\n          if (properties.name) {\n            descStr += `Feature ${i}: ${properties.name}<br/>`;\n          } else if (properties.text) {\n            descStr += `Feature ${i}: ${properties.user} tweeted \"${properties.text}\"</br>`;\n          } else {\n            const unknownString =\n              Object.keys(properties).length > 0\n                ? JSON.stringify(properties)\n                : features[i].layer.id || \"Unknown Layer\";\n\n            descStr += `Feature ${i}: ${unknownString}<br/>`;\n          }\n        }\n\n        const coordinates = e.lngLat;\n\n        new mapbox.Popup()\n          .setLngLat(coordinates)\n          .setHTML(`<p>${descStr}</p>`)\n          .addTo(map);\n      });\n\n      // Change the cursor to a pointer when the mouse is over the states layer.\n      map.on(\"mouseenter\", \"states\", function () {\n        map.getCanvas().style.cursor = \"pointer\";\n      });\n\n      // Change it back to a pointer when it leaves.\n      map.on(\"mouseleave\", \"states\", function () {\n        map.getCanvas().style.cursor = \"\";\n      });\n\n      // Change the cursor to a pointer when the mouse is over the states layer.\n      map.on(\"mouseenter\", \"twitter\", function () {\n        map.getCanvas().style.cursor = \"pointer\";\n      });\n\n      // Change it back to a pointer when it leaves.\n      map.on(\"mouseleave\", \"twitter\", function () {\n        map.getCanvas().style.cursor = \"\";\n      });\n    });\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\"></div>\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport * as mapbox from \"mapbox-gl/dist/mapbox-gl.js\";\n\nexport default class Simple extends React.Component {\n  componentDidMount() {\n    document.title = \"Mapbox | Popup Example\";\n\n    mapbox.accessToken = process.env.REACT_APP_MAPBOX_API_KEY;\n\n    // Construct a new map object.\n    // NOTE: Be sure to set the mapbox.accessToken before calling this!\n    const map = new mapbox.Map({\n      container: \"map\",\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [-90, 40],\n      zoom: 3,\n    });\n\n    map.addControl(new mapbox.NavigationControl(), \"top-left\");\n    map.on(\"click\", function (e) {\n      const lngLat = e.lngLat;\n\n      const htmlStr = `<p>You clicked at ${JSON.stringify(lngLat)}</p>`;\n\n      new mapbox.Popup().setLngLat(lngLat).setHTML(htmlStr).addTo(map);\n    });\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\"></div>\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport { Button, notification } from \"antd\";\nimport { CaretRightOutlined, PauseOutlined } from \"@ant-design/icons\";\nimport * as mapbox from \"mapbox-gl/dist/mapbox-gl.js\";\n\nexport default class Radar extends React.Component {\n  map = undefined;\n\n  radarObjects = [];\n  timestamps = [];\n  animationTimer = undefined;\n  animationPosition = -1;\n\n  constructor() {\n    super();\n    this.state = {\n      playing: false,\n    };\n  }\n\n  async componentDidMount() {\n    document.title = \"Mapbox | Radar Example\";\n\n    notification.destroy();\n    notification.info({\n      message: \"Radar\",\n      description:\n        \"Press the play button in the lower-left corner to start the radar animation\",\n      placement: \"topLeft\",\n      duration: 5,\n    });\n\n    mapbox.accessToken = process.env.REACT_APP_MAPBOX_API_KEY;\n\n    this.timestamps = await (\n      await fetch(\"https://api.rainviewer.com/public/maps.json\")\n    ).json();\n\n    const tiles = [];\n    const sources = [];\n\n    for (const ts of this.timestamps) {\n      const url = `https://tilecache.rainviewer.com/v2/radar/${ts}/256/{z}/{x}/{y}/2/1_1.png`;\n      const key = `radar-src-${ts}`;\n      const source = {};\n      source[key] = {\n        type: \"raster\",\n        tiles: [url],\n        tileSize: 256,\n      };\n\n      const layer = {\n        id: `radar-layer-${ts}`,\n        type: \"raster\",\n        source: key,\n        minzoom: 0,\n        maxzoom: 22,\n        layout: {\n          visibility: \"visible\",\n        },\n      };\n\n      tiles.push(url);\n      sources.push(source);\n\n      this.radarObjects[ts] = {\n        source,\n        layer,\n      };\n    }\n\n    this.map = new mapbox.Map({\n      container: \"map\", // container id\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [-74.5, 40], // starting position\n      zoom: 2, // starting zoom\n    });\n\n    this.map.addControl(new mapbox.NavigationControl(), \"top-left\");\n  }\n\n  componentWillUnmount() {\n    notification.destroy();\n  }\n\n  /**\n   * Animation functions\n   * @param ts\n   */\n  addLayer = (ts) => {\n    const obj = this.radarObjects[ts];\n\n    if (!this.map.getLayer(obj.layer.id)) {\n      const sourceId = Object.keys(obj.source).find((obj) => obj.includes(ts));\n      this.map.addSource(sourceId, obj.source[sourceId]);\n      this.map.addLayer(obj.layer);\n    } else {\n      this.map.setLayoutProperty(obj.layer.id, \"visibility\", \"visible\");\n    }\n  };\n\n  changeRadarPosition = (position, preloadOnly) => {\n    while (position >= this.timestamps.length) {\n      position -= this.timestamps.length;\n    }\n    while (position < 0) {\n      position += this.timestamps.length;\n    }\n\n    var currentTimestamp = this.timestamps[this.animationPosition];\n    var nextTimestamp = this.timestamps[position];\n\n    this.addLayer(nextTimestamp);\n\n    if (preloadOnly) {\n      return;\n    }\n\n    this.animationPosition = position;\n\n    if (currentTimestamp) {\n      const obj = this.radarObjects[currentTimestamp];\n\n      const layer = this.map.getLayer(obj.layer.id);\n      if (layer) {\n        this.map.setLayoutProperty(layer.id, \"visibility\", \"none\");\n      }\n    }\n  };\n\n  /**\n   * Stop the animation\n   * Check if the animation timeout is set and clear it.\n   */\n  stop = () => {\n    if (this.animationTimer !== undefined) {\n      clearTimeout(this.animationTimer);\n      this.animationTimer = undefined;\n      this.setState({ playing: false });\n      return true;\n    }\n    return false;\n  };\n\n  play = () => {\n    this.showFrame(this.animationPosition + 1);\n\n    // Main animation driver. Run this function every 500 ms\n    this.animationTimer = setTimeout(this.play, 500);\n    this.setState({ playing: true });\n  };\n\n  showFrame = (nextPosition) => {\n    var preloadingDirection =\n      nextPosition - this.animationPosition > 0 ? 1 : -1;\n\n    this.changeRadarPosition(nextPosition);\n\n    // preload next next frame (typically, +1 frame)\n    // if don't do that, the animation will be blinking at the first loop\n    this.changeRadarPosition(nextPosition + preloadingDirection, true);\n  };\n\n  render() {\n    return (\n      <>\n        <div id=\"map\" />\n        <Button\n          type=\"primary\"\n          style={{\n            position: \"absolute\",\n            bottom: 5,\n            left: 5,\n            height: 35,\n            zIndex: 9999,\n            width: 45,\n          }}\n          onClick={() => (this.state.playing ? this.stop() : this.play())}\n        >\n          {this.state.playing ? <PauseOutlined /> : <CaretRightOutlined />}\n        </Button>\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport * as mapbox from \"mapbox-gl/dist/mapbox-gl.js\";\n\nclass Simple extends React.Component {\n  map = undefined;\n\n  componentDidMount() {\n    document.title = \"Mapbox | Simple Example\";\n\n    mapbox.accessToken = process.env.REACT_APP_MAPBOX_API_KEY;\n\n    this.map = new mapbox.Map({\n      container: \"map\",\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [0, 0],\n      zoom: 1,\n    });\n\n    this.map.addControl(new mapbox.NavigationControl(), \"top-left\");\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\"></div>\n      </>\n    );\n  }\n}\n\nexport default Simple;\n","import React from \"react\";\nimport * as mapbox from \"mapbox-gl/dist/mapbox-gl.js\";\nimport * as turf from \"@turf/turf\";\n\nexport default class Center extends React.Component {\n  async componentDidMount() {\n    document.title = \"Mapbox | GeoJson Example\";\n    mapbox.accessToken = process.env.REACT_APP_MAPBOX_API_KEY;\n\n    const map = new mapbox.Map({\n      container: \"map\",\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [-90, 40],\n      zoom: 3,\n    });\n    map.addControl(new mapbox.NavigationControl(), \"top-left\");\n\n    map.on(\"load\", async function () {\n      const statesJson = await (\n        await fetch(`${window.location.origin}/states.json`)\n      ).json();\n\n      const turfFeatureCollection = turf.featureCollection(statesJson.features);\n      const allCenters = [];\n\n      turfFeatureCollection.features.forEach((feature) => {\n        const center = turf.center(feature);\n        center.properties = {\n          name: `${feature.properties.name}'s center` || \"\",\n        };\n        allCenters.push(center);\n      });\n      const centerFeatureCollection = turf.featureCollection(allCenters);\n\n      map.addSource(\"states\", {\n        type: \"geojson\",\n        data: statesJson,\n      });\n\n      map.addSource(\"turf\", {\n        type: \"geojson\",\n        data: centerFeatureCollection,\n      });\n\n      map.addLayer({\n        id: \"states\",\n        source: \"states\",\n        type: \"fill\",\n        paint: {\n          \"fill-color\": \"#03a9f4\",\n          \"fill-opacity\": 0.4,\n        },\n      });\n\n      map.addLayer({\n        id: \"turf\",\n        source: \"turf\",\n        type: \"symbol\",\n        layout: {\n          \"icon-image\": [\n            \"coalesce\",\n            [\"image\", [\"concat\", [\"get\", \"icon\"], \"-15\"]],\n            [\"image\", \"marker-15\"],\n          ],\n        },\n      });\n\n      map.on(\"click\", function (e) {\n        const features = map.queryRenderedFeatures(e.point);\n        if (!features || features.length <= 0) {\n          return;\n        }\n\n        let descStr = \"\";\n        for (let i = 0; i < features.length; i++) {\n          const properties = features[i].properties;\n          if (properties.name) {\n            descStr += `Feature ${i}: ${properties.name}<br/>`;\n          } else if (properties.text) {\n            descStr += `Feature ${i}: ${properties.user} tweeted \"${properties.text}\"</br>`;\n          } else {\n            const unknownString =\n              Object.keys(properties).length > 0\n                ? JSON.stringify(properties)\n                : features[i].layer.id || \"Unknown Layer\";\n\n            descStr += `Feature ${i}: ${unknownString}<br/>`;\n          }\n        }\n\n        const coordinates = e.lngLat;\n\n        new mapbox.Popup()\n          .setLngLat(coordinates)\n          .setHTML(`<p>${descStr}</p>`)\n          .addTo(map);\n      });\n\n      // Change the cursor to a pointer when the mouse is over the states layer.\n      map.on(\"mouseenter\", \"states\", function () {\n        map.getCanvas().style.cursor = \"pointer\";\n      });\n\n      // Change it back to a pointer when it leaves.\n      map.on(\"mouseleave\", \"states\", function () {\n        map.getCanvas().style.cursor = \"\";\n      });\n    });\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\"></div>\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport * as mapbox from \"mapbox-gl/dist/mapbox-gl.js\";\nimport * as turf from \"@turf/turf\";\n\nexport default class Connect extends React.Component {\n  async componentDidMount() {\n    document.title = \"Mapbox | GeoJson Example\";\n    mapbox.accessToken = process.env.REACT_APP_MAPBOX_API_KEY;\n\n    const map = new mapbox.Map({\n      container: \"map\",\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [-90, 40],\n      zoom: 3,\n    });\n    map.addControl(new mapbox.NavigationControl(), \"top-left\");\n\n    map.on(\"load\", async function () {\n      const twitterJson = await (\n        await fetch(`${window.location.origin}/twitter.json`)\n      ).json();\n\n      const turfFeatureCollection = turf.featureCollection(\n        twitterJson.features\n      );\n\n      const flatCoords = [];\n      turfFeatureCollection.features.forEach((feature) => {\n        flatCoords.push(feature.geometry.coordinates);\n      });\n\n      const lineString = turf.lineString(flatCoords);\n\n      map.addSource(\"twitter\", {\n        type: \"geojson\",\n        data: twitterJson,\n      });\n\n      map.addSource(\"turf\", {\n        type: \"geojson\",\n        data: lineString,\n      });\n\n      map.addLayer({\n        id: \"twitter\",\n        source: \"twitter\",\n        type: \"symbol\",\n        layout: {\n          \"icon-image\": [\n            \"coalesce\",\n            [\"image\", [\"concat\", [\"get\", \"icon\"], \"-15\"]],\n            [\"image\", \"marker-15\"],\n          ],\n        },\n      });\n\n      map.addLayer({\n        id: \"turf\",\n        source: \"turf\",\n        type: \"line\",\n      });\n\n      // Change the cursor to a pointer when the mouse is over the states layer.\n      map.on(\"mouseenter\", \"twitter\", function () {\n        map.getCanvas().style.cursor = \"pointer\";\n      });\n\n      // Change it back to a pointer when it leaves.\n      map.on(\"mouseleave\", \"twitter\", function () {\n        map.getCanvas().style.cursor = \"\";\n      });\n    });\n  }\n\n  render() {\n    return (\n      <>\n        <div id=\"map\"></div>\n      </>\n    );\n  }\n}\n","import \"antd/dist/antd.css\";\nimport React from \"react\";\nimport ComponentWrapper from \"../ComponentWrapper\";\nimport Drawing from \"./drawing\";\nimport GeoJSON from \"./geojson\";\nimport Popup from \"./popup\";\nimport Radar from \"./radar\";\nimport Simple from \"./simple\";\nimport Center from \"./turf/center\";\nimport Connect from \"./turf/connect\";\nimport \"./mapbox.css\";\n\nexport default function Mapbox() {\n  function mapResolver(key) {\n    switch (key) {\n      case \"1\":\n        return <Simple />;\n      case \"2\":\n        return <Drawing />;\n      case \"3\":\n        return <Popup />;\n      case \"4\":\n        return <GeoJSON />;\n      case \"5\":\n        return <Connect />;\n      case \"6\":\n        return <Center />;\n      case \"7\":\n        return <Radar />;\n      default:\n        return <Simple />;\n    }\n  }\n\n  return <ComponentWrapper framework=\"mapbox\" mapResolver={mapResolver} />;\n}\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Leaflet from \"./leaflet\";\nimport OpenLayers from \"./ol\";\nimport LandingPage from \"./landing-page\";\nimport Mapbox from \"./mapbox\";\n\nexport default function App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/leaflet/:id\" component={Leaflet}></Route>\n        <Route path=\"/ol/:id\" component={OpenLayers}></Route>\n        <Route path=\"/mapbox/:id\" component={Mapbox}></Route>\n        <Route path=\"/\" component={LandingPage}></Route>\n      </Switch>\n    </Router>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}