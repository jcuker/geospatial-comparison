(this["webpackJsonpgeospatial-comparison"]=this["webpackJsonpgeospatial-comparison"]||[]).push([[0],{260:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(50),i=n.n(o),s=(n(260),n(122)),c=n(53),p=(n(159),n(109)),u=n(25),l=n(26),d=n(27),m=n(28),h=n(311),f=n(312),j=n(308),g=n(151),b=n(232),y=n.n(b),w=n(1),v=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).toggleCollapsed=function(){a.setState({collapsed:!a.state.collapsed})},a.onSelect=function(e){e.item;var t=e.key;e.keyPath,e.selectedKeys,e.domEvent;a.setState({key:t}),t<1e3&&a.props.history.replace({pathname:"/".concat(a.props.framework,"/").concat(t)})},a.getNavItems=function(){var e=Object(w.jsx)(j.a.Item,{onClick:function(){a.props.history.push("/ol/".concat(a.state.key))},children:"Goto OpenLayers"},"1000"),t=Object(w.jsx)(j.a.Item,{onClick:function(){a.props.history.push("/leaflet/".concat(a.state.key))},children:"Goto Leaflet"},"1001"),n=Object(w.jsx)(j.a.Item,{onClick:function(){a.props.history.push("/mapbox/".concat(a.state.key))},children:"Goto Mapbox"},"1002");switch(a.props.framework){case"leaflet":return[e,n];case"ol":return[t,n];case"mapbox":return[t,e];default:return[t,e,n]}},a.state={collapsed:!1,key:"1",turf:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=window.location.pathname.split("/"),t=e[e.length-1];this.setState({key:t}),t>=5&&t<7&&this.setState({turf:!0})}},{key:"render",value:function(){var e=this,t=this.getNavItems(),n=this.props.mapResolver(this.state.key);return Object(w.jsxs)("div",{style:{height:"100vh",width:"100vw"},children:[Object(w.jsxs)("div",{style:{position:"absolute",zIndex:999999,right:0},children:[Object(w.jsx)(g.a,{type:"primary",onClick:this.toggleCollapsed,style:{position:"absolute",top:7.5,right:this.state.collapsed?5:"12.25rem"},children:r.a.createElement(this.state.collapsed?h.a:f.a)}),Object(w.jsxs)(j.a,{selectedKeys:[this.state.key],openKeys:[this.state.turf?"turf":""],mode:"inline",theme:"dark",style:{height:"100vh",width:this.state.collapsed?"0rem":"12rem"},onSelect:this.onSelect,children:[Object(w.jsx)(j.a.Item,{children:"Just a Map"},"1"),Object(w.jsx)(j.a.Item,{children:"Drawing Shapes"},"2"),Object(w.jsx)(j.a.Item,{children:"Popup at Click"},"3"),Object(w.jsx)(j.a.Item,{children:"GeoJSON"},"4"),Object(w.jsxs)(y.a,{title:"Turf",onTitleClick:function(){return e.setState({turf:!e.state.turf})},children:[Object(w.jsx)(j.a.Item,{children:"Connect the Dots"},"5"),Object(w.jsx)(j.a.Item,{children:"Center of States"},"6")]},"turf"),Object(w.jsx)(j.a.Item,{children:"Radar"},"7"),Object(p.a)(t)]})]}),n]})}}]),n}(r.a.Component),O=Object(c.f)(v),x=n(196),L=n(240),k=n(309),P=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).map=void 0,e.rects=[],e.openInfo=function(){L.a.destroy(),e.setState({modalOpen:!0})},e.closeModal=function(t){e.setState({modalOpen:!1})},e.state={gesture:void 0,finishedRect:void 0,modalOpen:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.title="Leaflet | Drawing Example",L.a.destroy(),L.a.info({message:"Drawing",description:"Clicking on the map will begin to draw a rectangle. Click the button in the bottom right for more information.",placement:"topLeft",duration:5});var t=window.L,n=t.map("map").setView([51.505,-.09],13);t.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'& <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(n);var a=t.marker([51.5,-.09]).addTo(n),r=t.circle([51.508,-.11],{color:"red",fillColor:"#f03",fillOpacity:.5,radius:500}).addTo(n),o=t.polygon([[51.509,-.08],[51.503,-.06],[51.51,-.047]]).addTo(n);a.bindPopup("I am a marker."),r.bindPopup("I am a circle."),o.bindPopup("I am a polygon."),this.map=n,n.on("click",(function(t){if(e.state.gesture){var n=e.state.gesture.inProgressRect.startingLatLng,a=t.latlng;e.setState({gesture:void 0,finishedRect:{startingLatLng:Object(p.a)(n),endingLatLng:[a.lat,a.lng]}})}else e.setState({gesture:{initial:t,inProgressRect:{startingLatLng:[t.latlng.lat,t.latlng.lng]}}})})),n.on("mousemove",(function(t){if(e.state.gesture&&e.state.gesture.inProgressRect&&e.state.gesture.inProgressRect.startingLatLng){var n=t.latlng;e.setState({gesture:{inProgressRect:{startingLatLng:Object(p.a)(e.state.gesture.inProgressRect.startingLatLng),endingLatLng:[n.lat,n.lng]}}})}}))}},{key:"componentWillUnmount",value:function(){L.a.destroy()}},{key:"componentDidUpdate",value:function(e,t){var n=window.L;if(this.rects.length>0&&this.rects[this.rects.length-1].temporary){var a=this.rects.pop();this.map.removeLayer(a)}if(this.state.finishedRect){var r=n.rectangle([Object(p.a)(this.state.finishedRect.startingLatLng),Object(p.a)(this.state.finishedRect.endingLatLng)],{color:"#ff7800",weight:5}).addTo(this.map);r.bindPopup("You drew me :)"),this.rects.push(r),this.setState({finishedRect:void 0})}else if(this.state.gesture&&this.state.gesture.inProgressRect.startingLatLng&&this.state.gesture.inProgressRect.endingLatLng){var o=n.rectangle([Object(p.a)(this.state.gesture.inProgressRect.startingLatLng),Object(p.a)(this.state.gesture.inProgressRect.endingLatLng)],{color:"#ff7800",weight:5}).addTo(this.map);o.temporary=!0,this.rects.push(o)}}},{key:"render",value:function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{id:"map"}),Object(w.jsx)(g.a,{type:"primary",onClick:this.openInfo,style:{position:"absolute",bottom:5,left:5,zIndex:999},children:r.a.createElement(x.a)}),Object(w.jsx)(k.a,{title:"Drawing in Leaflet",visible:this.state.modalOpen,footer:[Object(w.jsx)(g.a,{onClick:this.closeModal,children:"OK"},"ok")],children:Object(w.jsx)("p",{children:"Leaflet does not have built-in support for a robust drawing feature. Drawing a rectangle is easy enough to do, but a full-fledged drawing system is way more complex. Click the map once to anchor one point and then click another point to finish the rectangle. See source for additional comments."})})]})}}]),n}(r.a.Component),S=n(24),C=n.n(S),E=n(39),T=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,a,r,o=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Leaflet | GeoJson Example",t=window.L,n=t.map("map").setView([37.71859,-92.007813],4),t.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'& <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(n),e.next=6,fetch("".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1],"/states.json"));case 6:return e.next=8,e.sent.json();case 8:return a=e.sent,e.next=11,fetch("".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1],"/twitter.json"));case 11:return e.next=13,e.sent.json();case 13:r=e.sent,t.geoJSON(a,{onEachFeature:function(e,t){if(e.properties){var n=e.properties;o.popupElementStates(t,n)}}}).addTo(n),t.geoJSON(r,{onEachFeature:function(e,t){if(e.properties){var n=e.properties;o.popupElementTwitter(t,n)}}}).addTo(n);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"popupElementStates",value:function(e,t){e.bindPopup("Name: ".concat(t.name," id: ").concat(t.id))}},{key:"popupElementTwitter",value:function(e,t){e.bindPopup("Text: ".concat(t.text," user: ").concat(t.user))}},{key:"render",value:function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{id:"map"})})}}]),n}(r.a.Component),I=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.title="Leaflet | Popup Example";var e=window.L,t=e.map("map").setView([37.71859,-92.007813],4);e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'& <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(t),t.on("click",(function(n){e.popup().setLatLng(n.latlng).setContent("You clicked the map at "+n.latlng.toString()).openOn(t)}))}},{key:"render",value:function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{id:"map"})})}}]),n}(r.a.Component),F=n(313),R=n(314),M=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).L=window.L,e.radarLayers=[],e.timestamps=[],e.animationTimer=void 0,e.animationPosition=-1,e.addLayer=function(t){e.radarLayers[t]||(e.radarLayers[t]=new e.L.TileLayer("https://tilecache.rainviewer.com/v2/radar/"+t+"/256/{z}/{x}/{y}/2/1_1.png",{tileSize:256,opacity:.001,zIndex:t})),e.map.hasLayer(e.radarLayers[t])||e.map.addLayer(e.radarLayers[t])},e.changeRadarPosition=function(t,n){for(;t>=e.timestamps.length;)t-=e.timestamps.length;for(;t<0;)t+=e.timestamps.length;var a=e.timestamps[e.animationPosition],r=e.timestamps[t];e.addLayer(r),n||(e.animationPosition=t,e.radarLayers[a]&&e.radarLayers[a].setOpacity(0),e.radarLayers[r].setOpacity(100))},e.stop=function(){return void 0!==e.animationTimer&&(clearTimeout(e.animationTimer),e.animationTimer=void 0,e.setState({playing:!1}),!0)},e.play=function(){e.showFrame(e.animationPosition+1),e.animationTimer=setTimeout(e.play,500),e.setState({playing:!0})},e.showFrame=function(t){var n=t-e.animationPosition>0?1:-1;e.changeRadarPosition(t),e.changeRadarPosition(t+n,!0)},e.state={playing:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Leaflet | Radar Example",L.a.destroy(),L.a.info({message:"Radar",description:"Press the play button in the lower-left corner to start the radar animation",placement:"topLeft",duration:5}),this.map=this.L.map("map").setView([37.71859,-92.007813],5),this.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'& <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),e.next=7,fetch("https://api.rainviewer.com/public/maps.json");case 7:return e.next=9,e.sent.json();case 9:this.timestamps=e.sent;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){L.a.destroy()}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{id:"map"}),Object(w.jsx)(g.a,{type:"primary",style:{position:"absolute",bottom:5,left:5,height:35,zIndex:9999,width:45},onClick:function(){return e.state.playing?e.stop():e.play()},children:this.state.playing?Object(w.jsx)(F.a,{}):Object(w.jsx)(R.a,{})})]})}}]),n}(r.a.Component),D=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.title="Leaflet | Simple Example";var e=window.L,t=e.map("map").setView([0,0],2);e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'& <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(t)}},{key:"render",value:function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{id:"map"})})}}]),n}(r.a.Component),N=n(36),z=n(140),G=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,a,r,o,i,s=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Leaflet | Turf Center",t=window.L,n=t.map("map").setView([37.71859,-92.007813],4),t.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'& <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(n),e.next=6,fetch("".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1],"/states.json"));case 6:return e.next=8,e.sent.json();case 8:a=e.sent,r=N.b(a.features),o=[],r.features.forEach((function(e){var t=Object(z.a)(e);t.properties={name:e.properties.name||""},o.push(t)})),t.geoJSON(a,{onEachFeature:function(e,t){if(e.properties){var n=e.properties;s.popupElementStates(t,n)}}}).addTo(n),i=N.b(o),t.geoJSON(i,{onEachFeature:function(e,t){if(e.properties){var n=e.properties;s.popupElementCenter(t,n)}}}).addTo(n);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"popupElementStates",value:function(e,t){e.bindPopup("Name: ".concat(t.name," id: ").concat(t.id))}},{key:"popupElementCenter",value:function(e,t){e.bindPopup("Center of ".concat(t.name))}},{key:"render",value:function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{id:"map"})})}}]),n}(r.a.Component),B=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,a,r,o,i,s=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Leaflet | Turf LineString",t=window.L,n=t.map("map").setView([37.71859,-92.007813],4),t.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'& <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(n),e.next=6,fetch("".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1],"/twitter.json"));case 6:return e.next=8,e.sent.json();case 8:a=e.sent,r=N.b(a.features),o=[],r.features.forEach((function(e){o.push(e.geometry.coordinates)})),i=N.d(o),t.geoJSON(a,{onEachFeature:function(e,t){if(e.properties){var n=e.properties;s.popupElementTwitter(t,n)}}}).addTo(n),t.geoJSON(i).addTo(n);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"popupElementTwitter",value:function(e,t){e.bindPopup("Text: ".concat(t.text," user: ").concat(t.user))}},{key:"render",value:function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{id:"map"})})}}]),n}(r.a.Component);n(280);function A(){return Object(w.jsx)(O,{framework:"leaflet",mapResolver:function(e){switch(e){case"1":return Object(w.jsx)(D,{});case"2":return Object(w.jsx)(P,{});case"3":return Object(w.jsx)(I,{});case"4":return Object(w.jsx)(T,{});case"5":return Object(w.jsx)(B,{});case"6":return Object(w.jsx)(G,{});case"7":return Object(w.jsx)(M,{});default:return Object(w.jsx)(D,{})}}})}var V=n(315),U=n(316),_=n(65),J=n(141),W=n(95),X=n(77),q=n(189),H=n(305),K=n(71),Y=n(139),Q=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).draw=void 0,e.map=void 0,e.source=void 0,e.vector=void 0,e.raster=void 0,e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.title="OpenLayers | Drawing Example",L.a.destroy(),L.a.info({message:"Drawing Instructions",description:"Choose the shape type from the bottom-right corner to draw arbitrary shapes onto the map.",placement:"topLeft",duration:10}),this.raster=new W.a({source:new H.a}),this.source=new K.a({wrapX:!1}),this.vector=new X.a({source:this.source}),this.map=new q.a({layers:[this.raster,this.vector],target:"map",view:new Y.a({center:[-11e6,46e5],zoom:4})})}},{key:"componentWillUnmount",value:function(){L.a.destroy()}},{key:"addInteraction",value:function(e){var t,n=e.target.value;"None"!==n&&("Square"===n?(n="Circle",t=Object(J.b)(4)):"Box"===n?(n="Circle",t=Object(J.a)()):"Star"===n&&(n="Circle",t=function(e,t){for(var n=e[0],a=e[1],r=n[0]-a[0],o=n[1]-a[1],i=Math.sqrt(r*r+o*o),s=Math.atan2(o,r),c=[],p=0;p<12;++p){var u=s+2*p*Math.PI/12,l=p%2===0?1:.5,d=i*l*Math.cos(u),m=i*l*Math.sin(u);c.push([n[0]+d,n[1]+m])}return c.push(c[0].slice()),t?t.setCoordinates([c]):t=new _.a([c]),t}),this.draw=new J.c({source:this.source,type:n,geometryFunction:t}),this.map.addInteraction(this.draw))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{id:"map"}),Object(w.jsxs)("form",{style:{position:"absolute",bottom:0,left:5},children:[Object(w.jsx)("label",{children:"Shape type \xa0"}),Object(w.jsxs)("select",{id:"type",onChange:function(t){e.map.removeInteraction(e.draw),e.addInteraction(t)},children:[Object(w.jsx)("option",{value:"None",children:"None"}),Object(w.jsx)("option",{value:"Circle",children:"Circle"}),Object(w.jsx)("option",{value:"Square",children:"Square"}),Object(w.jsx)("option",{value:"Box",children:"Box"}),Object(w.jsx)("option",{value:"Star",children:"Star"})]})]})]})}}]),n}(r.a.Component),Z=n(81),$=(n(216),n(114)),ee=n(129),te=n(90),ne=n(104),ae=n(100),re=n(208),oe=[0,153,255,1],ie=[0,255,64,1],se=[242,13,13,1],ce=[0,0,0,1],pe=[255,255,255,1],ue=function(){return[new ae.c({image:new ee.a({radius:6,fill:new te.a({color:oe}),stroke:new ne.a({color:pe,width:1.5})}),zIndex:Number.MAX_SAFE_INTEGER})]},le=function(e){var t=function(e){return(e=e.toLowerCase()).includes("positive")?ie:e.includes("neutral")?oe:e.includes("negative")?se:ce}(e.getProperties().sentiment||"");return[new ae.c({image:new ee.a({radius:6,fill:new te.a({color:t}),stroke:new ne.a({color:pe,width:1.5})}),zIndex:Number.MAX_SAFE_INTEGER})]};var de=function(e){var t=e.getProperties().selected?"#FF6347":"#7FDBFF33",n=e.getProperties().name;return[new ae.c({fill:new te.a({color:t}),stroke:new ne.a({color:"#0074D9",width:2}),text:new re.a({text:n})})]};function me(e){var t=e.get("features"),n=t.length;if(0!==n)return n>1?new ae.c({image:new ee.a({radius:10,stroke:new ne.a({color:"#fff"}),fill:new te.a({color:"#3399CC"})}),text:new re.a({text:n.toString(),fill:new te.a({color:"#fff"})}),zIndex:Number.MAX_SAFE_INTEGER}):le(t[0])}function he(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function fe(e){return!(!e||!e.get("features"))&&e.get("features").length>=1}var je=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,a,r,o,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.title="OpenLayers | GeoJson Example",t=document.getElementById("popup"),n=document.getElementById("popup-content"),a=document.getElementById("popup-closer"),r=new $.a({element:t,autoPan:!0,autoPanAnimation:{duration:250}}),a.onclick=function(){return r.setPosition(void 0),a.blur(),!1},e.prev=6,o=new X.a({source:new K.a({format:new Z.a,url:"".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1],"/twitter.json")}),style:ue}),i=new X.a({source:new K.a({format:new Z.a,url:"".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1],"/states.json")}),style:de}),(s=new q.a({layers:[new W.a({source:new H.a}),o,i],target:"map",overlays:[r],view:new Y.a({center:[-11e6,46e5],zoom:4})})).on("singleclick",(function(e){var t=[];if(s.forEachFeatureAtPixel(e.pixel,(function(e,n){t.push(e)})),t.length>0){for(var a=e.coordinate,o="",i=0;i<t.length;i++){var c=t[i].getProperties(),p=void 0;p=c.name?c.name:c.text,o+="Feature ".concat(i,": ").concat(p,"<br/>")}n.innerHTML=o,r.setPosition(a)}})),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(6),console.log(e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(w.jsxs)("div",{className:"wrapper",children:[Object(w.jsx)("div",{id:"map"}),";",Object(w.jsxs)("div",{id:"popup",className:"ol-popup",children:[Object(w.jsx)("div",{id:"popup-closer",className:"ol-popup-closer"}),Object(w.jsx)("div",{id:"popup-content"})]})]})}}]),n}(r.a.Component),ge=n(113),be=n(8),ye=n(46),we=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.title="OpenLayers | Popup Example";var e=document.getElementById("popup"),t=document.getElementById("popup-content"),n=document.getElementById("popup-closer"),a=new $.a({element:e,autoPan:!0,autoPanAnimation:{duration:250}});n.onclick=function(){return a.setPosition(void 0),n.blur(),!1},new q.a({target:"map",layers:[new W.a({source:new ge.a({url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"})})],overlays:[a],view:new Y.a({center:[0,0],zoom:2})}).on("singleclick",(function(e){var n=e.coordinate,r=Object(ye.g)(be.l(n));t.innerHTML="<p>You clicked here:</p><code>"+r+"</code>",a.setPosition(n)}))}},{key:"render",value:function(){return Object(w.jsxs)("div",{className:"wrapper",children:[Object(w.jsx)("div",{id:"map"}),Object(w.jsxs)("div",{id:"popup",className:"ol-popup",children:[Object(w.jsx)("div",{id:"popup-closer",className:"ol-popup-closer"}),Object(w.jsx)("div",{id:"popup-content"})]})]})}}]),n}(r.a.Component),ve=n(241),Oe=n(112),xe=n(307),Le=n(210),ke=n(209),Pe=n(236),Se=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).map=void 0,e.radarLayers=[],e.timestamps=[],e.jsDates=[],e.animationTimer=void 0,e.animationPosition=-1,e.tweetsByTime=[],e.tweetClusterLayer=void 0,e.twitterLayer=void 0,e.addLayer=function(t){if(!e.radarLayers[t]){var n="https://tilecache.rainviewer.com/v2/radar/"+t+"/256/{z}/{x}/{y}/2/1_1.png",a=new W.a({source:new ge.a({url:n,tileSize:256}),zIndex:t,opacity:.001});a.setProperties({url:n}),e.radarLayers[t]=a}(function(e,t){var n=t.getProperties(),a=e.getLayers(),r=!1;return a.forEach((function(e){var t=e.getProperties();t&&n&&t.url===n.url&&(r=!0)})),r})(e.map,e.radarLayers[t])||e.map.addLayer(e.radarLayers[t]);var r=e.tweetsByTime[t];r&&r.length>0&&(e.tweetClusterLayer.getSource().getSource().addFeatures(r),e.twitterLayer.getSource().addFeatures(r))},e.changeRadarPosition=function(t,n){for(;t>=e.timestamps.length;)t-=e.timestamps.length;for(;t<0;)t+=e.timestamps.length;var a=e.timestamps[e.animationPosition],r=e.timestamps[t];e.twitterLayer.getSource().clear(),e.tweetClusterLayer.getSource().getSource().clear(),e.addLayer(r),n||(e.animationPosition=t,e.state.showRadar&&(e.radarLayers[a]&&e.radarLayers[a].setOpacity(0),e.radarLayers[r].setOpacity(100)))},e.stop=function(){return void 0!==e.animationTimer&&(clearTimeout(e.animationTimer),e.animationTimer=void 0,e.setState({playing:!1}),!0)},e.play=function(){e.showFrame(e.animationPosition+1),e.animationTimer=setTimeout(e.play,500),e.setState({playing:!0})},e.showFrame=function(t){var n=t-e.animationPosition>0?1:-1;e.changeRadarPosition(t),e.changeRadarPosition(t+n,!0)},e.stepPosition=function(t){if(e.state.loaded&&!e.state.playing){var n="l"===t?e.animationPosition-1:e.animationPosition+1;e.showFrame(n),e.forceUpdate()}},e.onSliderChange=function(t){e.setState({inputValue:t}),e.tweetClusterLayer.getSource().setDistance(t)},e.state={playing:!1,loaded:!1,showTwitter:!1,showRadar:!0,inputValue:60},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,a,r,o=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.title="OpenLayers | Radar Example",t=document.getElementById("popup"),n=document.getElementById("popup-content"),a=document.getElementById("popup-closer"),r=this.createOverlay(t,n,a),this.loadData(),this.map=new q.a({target:"map",layers:[new W.a({source:new H.a})],view:new Y.a({center:[-11e6,46e5],zoom:5}),overlays:[r]}),this.map.on("singleclick",(function(e){var t=[];if(o.map.forEachFeatureAtPixel(e.pixel,(function(e,n){if(fe(e)){var a,r=e.get("features"),o=Object(Oe.a)(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;i.getProperties().twitter&&t.push(i)}}catch(s){o.e(s)}finally{o.f()}}else{e.getProperties().twitter&&t.push(e)}})),t.length>0){for(var i=e.coordinate,s="",c=0;c<t.length;c++){var p=t[c].getProperties(),u="User <em><b>".concat(p.user,'</b></em> tweeted "').concat(p.text,'" near ').concat(p.place,".<br/>");u+="The tweet seems to have a <b>".concat(p.sentiment,"</b> sentiment."),s+="Feature ".concat(c+1,":<br/> ").concat(u,"<br/>"),c<t.length-1&&(s+="<br/>")}n.innerHTML=s,r.setPosition(i)}else r.setPosition(void 0),a.blur()}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOverlay",value:function(e,t,n){var a=new $.a({element:e,autoPan:!0,autoPanAnimation:{duration:250}});return n.onclick=function(){return a.setPosition(void 0),n.blur(),!1},a}},{key:"loadData",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,a,r=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.rainviewer.com/public/maps.json");case 2:return e.next=4,e.sent.json();case 4:if(this.timestamps=e.sent,this.jsDates=this.timestamps.map((function(e){return new Date(1e3*e)})),t=this.props.remote?this.props.remote:"".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1]),L.a.destroy(),L.a.info({message:"Please Wait",description:"Loading data...",placement:"topLeft",duration:0}),e.prev=9,!this.props.remote){e.next=20;break}return 5e4,a="".concat(t,"/streaming/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=streaming%3Astl-twitter&TIME=PT3H/PRESENT&width=768&height=330&srs=EPSG%3A4326&maxFeatures=").concat(5e4,"&outputFormat=application%2Fjson"),e.next=15,fetch(a);case 15:return e.next=17,e.sent.json();case 17:n=e.sent,e.next=25;break;case 20:return e.next=22,fetch("".concat(t,"/enriched_twitter.json"));case 22:return e.next=24,e.sent.json();case 24:n=e.sent;case 25:e.next=32;break;case 27:return e.prev=27,e.t0=e.catch(9),L.a.destroy(),L.a.error({placement:"topLeft",description:"Unable to get data. If not already, try to use local data if problem persists."}),e.abrupt("return");case 32:n.features.map((function(e){var t=e.properties;if(t.twitter=!0,r.props.remote){var n=new Date(t.dtg).getTime()/1e3,a=r.findMatchingTimestamp(n);t.dtg=a}else{var o=he(0,r.timestamps.length-1);t.dtg=r.jsDates[o].getTime()/1e3}return e.properties=Object(ve.a)({},t),e})),(new Z.a).readFeatures(n).map((function(e){var t=e.getProperties().dtg;return r.tweetsByTime[t]||(r.tweetsByTime[t]=[]),r.tweetsByTime[t].push(e),e.getGeometry().transform("EPSG:4326","EPSG:3857"),e})),this.tweetClusterLayer=new X.a({source:new Pe.a({distance:this.state.inputValue,source:new K.a({format:new Z.a})}),style:me,zIndex:Number.MAX_SAFE_INTEGER}),this.twitterLayer=new X.a({source:new K.a({format:new Z.a}),style:le,zIndex:Number.MAX_SAFE_INTEGER}),this.map.addLayer(this.tweetClusterLayer),this.showFrame(this.animationPosition),this.setState({loaded:!0}),L.a.destroy(),L.a.success({message:"Success",description:"Loaded ".concat(n.features.length," tweets onto the map!"),duration:10,placement:"topLeft"}),L.a.info({message:"Radar",description:"Press the play button in the lower-left corner to start the radar animation.\n You can page through each frame using the arrows and change the radius of the clutering algorithm with the slider.",placement:"topLeft",duration:12});case 43:case"end":return e.stop()}}),e,this,[[9,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){L.a.destroy()}},{key:"componentDidUpdate",value:function(e,t,n){t.showTwitter!==this.state.showTwitter&&(this.twitterLayer.setVisible(!this.twitterLayer.getVisible()),this.tweetClusterLayer.setVisible(!this.tweetClusterLayer.getVisible())),t.showRadar!==this.state.showRadar&&(this.state.showRadar?this.radarLayers[this.timestamps[this.animationPosition]].setOpacity(100):this.radarLayers[this.timestamps[this.animationPosition]].setOpacity(0))}},{key:"getTimeDisplay",value:function(){if(0===this.jsDates.length)return(new Date).toLocaleString("en-us");var e=(-1===this.animationPosition?this.jsDates[0]:this.jsDates[this.animationPosition]).toLocaleString("en-us");return Object(w.jsx)("p",{style:{fontSize:12,textAlign:"center",alignSelf:"center",justifySelf:"center",margin:0,color:"black"},children:e})}},{key:"findMatchingTimestamp",value:function(e){for(var t=0,n=1;n<this.timestamps.length-1;){if(e>=this.timestamps[t]&&e<this.timestamps[n])return this.timestamps[t];t++,n++}var a=he(0,this.timestamps.length-1);return this.jsDates[a].getTime()/1e3}},{key:"render",value:function(){var e=this,t=this.getTimeDisplay();return Object(w.jsxs)("div",{className:"wrapper",children:[Object(w.jsx)("div",{id:"map"}),Object(w.jsxs)("div",{id:"popup",className:"ol-popup",children:[Object(w.jsx)("div",{id:"popup-closer",className:"ol-popup-closer"}),Object(w.jsx)("div",{id:"popup-content"})]}),Object(w.jsx)(g.a,{type:"primary",onClick:function(){return e.setState({showTwitter:!e.state.showTwitter})},style:{position:"absolute",bottom:85,left:5,height:35,width:125},children:"Toggle Tweets"}),Object(w.jsx)(g.a,{type:"primary",onClick:function(){return e.setState({showRadar:!e.state.showRadar})},style:{position:"absolute",bottom:125,left:5,width:125},children:"Toggle Radar"}),Object(w.jsxs)("div",{style:{display:"flex",flexDirection:"row",position:"absolute",bottom:5,left:5,height:35,width:300,zIndex:9999,alignItems:"center",justifyContent:"space-between"},children:[Object(w.jsx)(g.a,{type:"primary",style:{width:45},onClick:function(){return e.state.playing?e.stop():e.play()},children:this.state.playing?Object(w.jsx)(F.a,{}):Object(w.jsx)(R.a,{})}),Object(w.jsxs)("div",{style:{position:"absolute",paddingLeft:5,left:0,bottom:40,display:"flex",flexDirection:"row",textAlign:"center",alignContent:"center",alignItems:"center",background:"white",width:300,justifyContent:"space-between",borderRadius:"3px"},children:[Object(w.jsx)("p",{style:{margin:0},children:"Grouping Distance"}),Object(w.jsx)(xe.a,{min:0,max:400,step:20,style:{width:75,flex:2},value:this.state.inputValue,onChange:this.onSliderChange})]}),Object(w.jsxs)("div",{style:{display:"flex",marginLeft:15,justifyContent:"center",alignItems:"center",background:"white"},children:[Object(w.jsx)(g.a,{type:"primary",style:{width:25,marginRight:5,display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(){return e.stepPosition("l")},children:Object(w.jsx)(Le.a,{})}),t,Object(w.jsx)(g.a,{type:"primary",style:{width:25,marginLeft:5,display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(){return e.stepPosition("r")},children:Object(w.jsx)(ke.a,{})})]})]})]})}}]),n}(r.a.Component),Ce=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.title="OpenLayers | Simple Example",new q.a({target:"map",layers:[new W.a({source:new ge.a({url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"})})],view:new Y.a({center:[0,0],zoom:2})})}},{key:"render",value:function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{id:"map"})})}}]),n}(r.a.Component),Ee=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,a,r,o,i,s,c,p,u,l,d,m,h,f,j,g,b,y;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="OpenLayers | Turf Center",t=document.getElementById("popup"),n=document.getElementById("popup-content"),a=document.getElementById("popup-closer"),r=new $.a({element:t,autoPan:!0,autoPanAnimation:{duration:250}}),a.onclick=function(){return r.setPosition(void 0),a.blur(),!1},e.next=8,fetch("".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1],"/states.json"));case 8:return o=e.sent,e.next=11,o.json();case 11:i=e.sent,s=new K.a,c=new Z.a,(p=c.readFeatures(i)).map((function(e){return e.getGeometry().transform("EPSG:4326","EPSG:3857")})),u=Object(Oe.a)(i.features);try{for(u.s();!(l=u.n()).done;)d=l.value,m=N.e(d.geometry.coordinates),h=Object(z.a)(m),(f=c.readFeature(h)).setProperties({name:"Center of "+d.properties.name}),s.addFeature(f)}catch(w){u.e(w)}finally{u.f()}s.getFeatures().forEach((function(e){e.getGeometry().transform("EPSG:4326","EPSG:3857")})),j=new X.a({source:s}),g=new W.a({source:new H.a}),b=new X.a({source:new K.a({format:new Z.a,features:p}),style:de}),(y=new q.a({layers:[g,j,b],target:document.getElementById("map"),view:new Y.a({center:Object(be.d)([-90.81070553065938,40.716527262756514]),zoom:4}),overlays:[r]})).on("singleclick",(function(e){var t=[];if(y.forEachFeatureAtPixel(e.pixel,(function(e,n){t.push(e)})),t.length>0){for(var a=e.coordinate,o="",i=0;i<t.length;i++){var s=t[i].getProperties(),c=void 0;c=s.name?s.name:s.text,o+="Feature ".concat(i,": ").concat(c,"<br />")}n.innerHTML=o,r.setPosition(a)}}));case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(w.jsxs)("div",{className:"wrapper",children:[Object(w.jsx)("div",{id:"map"}),Object(w.jsxs)("div",{id:"popup",className:"ol-popup",children:[Object(w.jsx)("div",{id:"popup-closer",className:"ol-popup-closer"}),Object(w.jsx)("div",{id:"popup-content"})]})]})}}]),n}(r.a.Component),Te=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,a,r,o,i,s,c,p,u,l,d,m,h;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="OpenLayers | Turf LineString",e.next=3,fetch("".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1],"/twitter.json"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=new K.a,r=new Z.a,(o=r.readFeatures(n)).map((function(e){return e.getGeometry().transform("EPSG:4326","EPSG:3857")})),i=[],s=Object(Oe.a)(o);try{for(s.s();!(c=s.n()).done;)p=c.value,i.push(p.getGeometry().flatCoordinates)}catch(f){s.e(f)}finally{s.f()}u=N.d(i),l=r.readFeature(u),a.addFeature(l),d=new X.a({source:a}),m=new W.a({source:new H.a}),h=new X.a({source:new K.a({format:new Z.a,features:o}),style:ue}),new q.a({layers:[m,d,h],target:document.getElementById("map"),view:new Y.a({center:Object(be.d)([-90.81070553065938,40.716527262756514]),zoom:4})});case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{id:"map"})})}}]),n}(r.a.Component),Ie=(n(281),function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).toggleRemote=function(){e.setState({remote:!e.state.remote})},e.mapResolver=function(t){var n="".concat(String(e.state.remote),"-").concat(t);switch(t){case"1":return Object(w.jsx)(Ce,{});case"2":return Object(w.jsx)(Q,{});case"3":return Object(w.jsx)(we,{});case"4":return Object(w.jsx)(je,{});case"5":return Object(w.jsx)(Te,{});case"6":return Object(w.jsx)(Ee,{});case"7":var a=Object(w.jsx)(g.a,{type:"primary",onClick:e.toggleRemote,style:{position:"absolute",top:45,right:e.state.collapsed?5:"12.25rem"},children:r.a.createElement(e.state.remote?V.a:U.a)});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Se,{remote:e.state.remote?e.state.remoteUrl:void 0},n),a]});default:return Object(w.jsx)(Ce,{})}},e.state={remote:!1,remoteUrl:""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1],"/env.json"));case 2:return e.next=4,e.sent.json();case 4:t=e.sent,this.setState({remoteUrl:t.geoserverUrl});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(w.jsx)(O,{framework:"ol",mapResolver:this.mapResolver})}}]),n}(r.a.Component)),Fe=n(306);n(282);function Re(){return Object(w.jsxs)("div",{className:"landing-page",children:[Object(w.jsx)(s.b,{to:"/leaflet/1",id:"leaflet",className:"framework",children:Object(w.jsx)("img",{src:"https://leafletjs.com/docs/images/logo.png",alt:"to leaflet"})}),Object(w.jsx)(Fe.a,{className:"divider"}),Object(w.jsx)(s.b,{to:"/ol/1",id:"ol",className:"framework",children:Object(w.jsx)("img",{src:"https://financesonline.com/uploads/2019/09/OpenLayers-logo1.png",alt:"to openlayers"})}),Object(w.jsx)(Fe.a,{className:"divider"}),Object(w.jsx)(s.b,{to:"/mapbox/1",id:"mapbox",className:"framework",children:Object(w.jsx)("img",{src:"https://logodix.com/logo/1863638.png",alt:"to mapbox"})})]})}var Me=n(317),De=n(37),Ne=(n(300),n(237));r.a.Component,r.a.Component,r.a.Component,r.a.Component,r.a.Component,r.a.Component,r.a.Component,n(301);function ze(){return Object(w.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",justifyContent:"center",textAlign:"center"},children:[Object(w.jsx)(Me.a,{style:{fontSize:"6rem",marginBottom:12}}),Object(w.jsx)("span",{children:"Mapbox is unable to run based on how I host this example app. Feel free to clone, provide your own API key, and then run the examples locally. I apologize for any inconvenience. "})]})}function Ge(){return Object(w.jsx)(s.a,{basename:"/geospatial-comparison",children:Object(w.jsxs)(c.c,{children:[Object(w.jsx)(c.a,{path:"/leaflet/:id",component:A}),Object(w.jsx)(c.a,{path:"/ol/:id",component:Ie}),Object(w.jsx)(c.a,{path:"/mapbox/:id",component:ze}),Object(w.jsx)(c.a,{path:"/",component:Re})]})})}i.a.render(Object(w.jsx)(Ge,{}),document.getElementById("root"))}},[[302,1,2]]]);
//# sourceMappingURL=main.2d0de1b4.chunk.js.map